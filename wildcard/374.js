"use strict";(self.webpackChunk_micro_snake_plugin_wildcard=self.webpackChunk_micro_snake_plugin_wildcard||[]).push([[374],{374:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n;// CONCATENATED MODULE: ../store/src/gameConstants.ts\nconst CONSTANTS = {\n    gridSize: 20,\n    tileSizeMultiplier: 0.9,\n    get tileSize() {\n        return this.gridSize * this.tileSizeMultiplier;\n    },\n    get canvasSize() {\n        return this.gridSize * this.gridSize;\n    },\n    get startPosition() {\n        return { x: this.gridSize / 2, y: this.gridSize / 2 };\n    },\n    startFps: 6,\n    startTailSize: 5\n};\nconst velocityByKeyCode = {\n    // these should really account for the tileSize\n    37: { x: -1, y: 0 },\n    38: { x: 0, y: -1 },\n    39: { x: 1, y: 0 },\n    40: { x: 0, y: 1 }\n};\n\n// EXTERNAL MODULE: consume shared module (default) mobx@^6.3.13 (singleton) (fallback: ../../node_modules/mobx/dist/mobx.esm.js)\nvar mobx_esm_js_ = __webpack_require__(217);\n// EXTERNAL MODULE: consume shared module (default) react@^17.0.2 (singleton) (fallback: ../../node_modules/react/index.js)\nvar index_js_ = __webpack_require__(927);\nvar index_js_default = /*#__PURE__*/__webpack_require__.n(index_js_);\n;// CONCATENATED MODULE: ../store/src/gameStore.ts\n\n\n\n// without configuring enforceActions it would be possible to modify any observable from anywhere\n(0,mobx_esm_js_.configure)({ enforceActions: 'observed' });\n// base class\nclass GameStore {\n    constructor() {\n        this.gridSize = CONSTANTS.gridSize;\n        // initial game state, player is centered with no velocity\n        this.playerPosition = CONSTANTS.startPosition;\n        this.velocity = {\n            x: 0,\n            y: 0\n        };\n        this.trail = [CONSTANTS.startPosition];\n        this.tailSize = CONSTANTS.startTailSize;\n        // housekeeping to control animation\n        this.running = false;\n        // use to control fps and therefore game speed\n        this.lastFrameTime = Date.now();\n        this.fps = CONSTANTS.startFps;\n        this.suspendGame = (0,mobx_esm_js_.action)(() => {\n            this.running = false;\n        });\n        this.startGame = () => {\n            this.running = true;\n            this.tick();\n        };\n        this.tick = () => {\n            // render loop control\n            if (this.running) {\n                requestAnimationFrame(() => this.tick());\n                const now = Date.now();\n                const elapsed = now - this.lastFrameTime;\n                // render speed control\n                if (elapsed > this.frameInterval) {\n                    this.lastFrameTime = now - (elapsed % this.frameInterval);\n                    this.updatePlayerPosition(this.playerPosition, this.velocity);\n                }\n            }\n        };\n        this.updatePlayerPosition = (0,mobx_esm_js_.action)(({ x: px, y: py }, { x: vx, y: vy }) => {\n            if (vx || vy) {\n                const newPlayerPosition = {\n                    x: px + vx,\n                    y: py + vy\n                };\n                if (newPlayerPosition.x < 0) {\n                    newPlayerPosition.x = this.gridSize - 1;\n                }\n                if (newPlayerPosition.x > this.gridSize - 1) {\n                    newPlayerPosition.x = 0;\n                }\n                if (newPlayerPosition.y < 0) {\n                    newPlayerPosition.y = this.gridSize - 1;\n                }\n                if (newPlayerPosition.y > this.gridSize - 1) {\n                    newPlayerPosition.y = 0;\n                }\n                this.playerPosition = newPlayerPosition;\n                this.trail = this.trail.concat(newPlayerPosition).slice(-this.tailSize);\n            }\n        });\n        this.setVelocity = (0,mobx_esm_js_.action)((newVelocity) => {\n            this.velocity = newVelocity;\n        });\n        this.setTailSize = (0,mobx_esm_js_.action)((tailSize) => {\n            this.tailSize = tailSize;\n        });\n        this.setFPS = (0,mobx_esm_js_.action)((fps) => {\n            this.fps = fps;\n        });\n        this.setPlayerPosition = (0,mobx_esm_js_.action)((newPlayerPosition) => {\n            this.playerPosition = newPlayerPosition;\n        });\n        this.getRandomPosition = () => ({\n            x: Math.floor(Math.random() * this.gridSize),\n            y: Math.floor(Math.random() * this.gridSize)\n        });\n        (0,mobx_esm_js_.makeObservable)(this, {\n            playerPosition: mobx_esm_js_.observable,\n            trail: mobx_esm_js_.observable,\n            tailSize: mobx_esm_js_.observable,\n            frameInterval: mobx_esm_js_.computed,\n            score: mobx_esm_js_.computed,\n            running: mobx_esm_js_.observable\n        });\n        // setup lazy observables\n        (0,mobx_esm_js_.onBecomeObserved)(this, 'playerPosition', this.startGame);\n        (0,mobx_esm_js_.onBecomeUnobserved)(this, 'playerPosition', this.suspendGame);\n    }\n    get frameInterval() {\n        return 1000 / this.fps;\n    }\n    get score() {\n        return this.tailSize - CONSTANTS.startTailSize;\n    }\n}\n// all references should point to this singleton.\n// If store is accessed outside of useContext (e.g. outside of React) you need to use this instance (unless you want multiple stores)!\nconst GameStoreInstance = new GameStore();\nconst GameStoreContext = (0,index_js_.createContext)(GameStoreInstance);\n\n;// CONCATENATED MODULE: ../store/src/lazyPluginProvider.tsx\nvar __rest = (undefined && undefined.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n\nconst lazyPluginProvider_LazyPluginProvider = (_a) => {\n    var { Plugin, asyncLoad } = _a, rest = __rest(_a, [\"Plugin\", \"asyncLoad\"]);\n    const [gameStore, setGameStore] = index_js_default().useState(null);\n    index_js_default().useEffect(() => {\n        asyncLoad().then((module) => setGameStore(module.GameStoreInstance));\n    }, []);\n    return gameStore ? index_js_default().createElement(Plugin, Object.assign({ gameStore: gameStore }, rest)) : null;\n};\n\n;// CONCATENATED MODULE: ../store/src/index.ts\n\n\n\n\n;// CONCATENATED MODULE: ../store/index.ts\n\n\n// EXTERNAL MODULE: ../../node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(316);\n// EXTERNAL MODULE: consume shared module (default) react-konva@^17.0.2-5 (singleton) (fallback: ../../node_modules/react-konva/es/ReactKonva.js)\nvar ReactKonva_js_ = __webpack_require__(641);\n// EXTERNAL MODULE: consume shared module (default) mobx-react@^7.2.1 (singleton) (fallback: ../../node_modules/mobx-react/dist/mobxreact.esm.js)\nvar mobxreact_esm_js_ = __webpack_require__(189);\n;// CONCATENATED MODULE: ./app.tsx\n\n\n\n\nconst REDUCTION_AMOUNT = 2;\nconst REDUCTION_LENGTH = 5000;\nconst Teleport = (0,mobxreact_esm_js_.observer)(function ({ gameStore }) {\n    const { playerPosition, setFPS, getRandomPosition, setPlayerPosition } = gameStore;\n    const [teleportPosition, setPlumPosition] = index_js_default().useState(getRandomPosition());\n    index_js_default().useEffect(() => {\n        if (teleportPosition.x === playerPosition.x &&\n            teleportPosition.y === playerPosition.y) {\n            // move the teleport\n            setPlumPosition(getRandomPosition);\n            // teleport the player\n            setPlayerPosition(getRandomPosition());\n            // temporarily decrease speed for better survival odds\n            setFPS(gameStore.fps - REDUCTION_AMOUNT);\n            // eventually remove the speed buff\n            setTimeout(() => setFPS(gameStore.fps + REDUCTION_AMOUNT), REDUCTION_LENGTH);\n        }\n    }, [teleportPosition, playerPosition]);\n    const starSize = CONSTANTS.tileSize / 2;\n    return (index_js_default().createElement(ReactKonva_js_.Layer, null, index_js_default().createElement(ReactKonva_js_.Star, { innerRadius: starSize, numPoints: 5, outerRadius: starSize, offset: { x: -starSize, y: -starSize }, stroke: 'orange', width: starSize, height: starSize, x: teleportPosition.x * CONSTANTS.gridSize, y: teleportPosition.y * CONSTANTS.gridSize })));\n});\n\n/* harmony default export */ const app = (() => React.createElement(LazyPluginProvider, { Plugin: Teleport, asyncLoad: () => __webpack_require__.e(/* import() */ 700).then(__webpack_require__.t.bind(__webpack_require__, 700, 23)) }));\n\n;// CONCATENATED MODULE: ./bootstrap.tsx\n\n\n\n\n\nreact_dom.render(index_js_default().createElement(ReactKonva_js_.Stage, { width: CONSTANTS.canvasSize, height: CONSTANTS.canvasSize },\n    index_js_default().createElement(lazyPluginProvider_LazyPluginProvider, { Plugin: Teleport, asyncLoad: () => __webpack_require__.e(/* import() */ 700).then(__webpack_require__.t.bind(__webpack_require__, 700, 23)) })), document.getElementById('root'));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzc0LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNuQkE7QUFDQTtBQUNBOzs7QUNGQTs7Ozs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AbWljcm8tc25ha2UvcGx1Z2luLXdpbGRjYXJkLy4uL3N0b3JlL3NyYy9nYW1lQ29uc3RhbnRzLnRzPzkyNDUiLCJ3ZWJwYWNrOi8vQG1pY3JvLXNuYWtlL3BsdWdpbi13aWxkY2FyZC8uLi9zdG9yZS9zcmMvZ2FtZVN0b3JlLnRzPzZlNDkiLCJ3ZWJwYWNrOi8vQG1pY3JvLXNuYWtlL3BsdWdpbi13aWxkY2FyZC8uLi9zdG9yZS9zcmMvbGF6eVBsdWdpblByb3ZpZGVyLnRzeD80YzBmIiwid2VicGFjazovL0BtaWNyby1zbmFrZS9wbHVnaW4td2lsZGNhcmQvLi4vc3RvcmUvc3JjL2luZGV4LnRzPzMzYzMiLCJ3ZWJwYWNrOi8vQG1pY3JvLXNuYWtlL3BsdWdpbi13aWxkY2FyZC8uLi9zdG9yZS9pbmRleC50cz9lMDEzIiwid2VicGFjazovL0BtaWNyby1zbmFrZS9wbHVnaW4td2lsZGNhcmQvLi9hcHAudHN4P2VjNTYiLCJ3ZWJwYWNrOi8vQG1pY3JvLXNuYWtlL3BsdWdpbi13aWxkY2FyZC8uL2Jvb3RzdHJhcC50c3g/MjIyZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgQ09OU1RBTlRTID0ge1xuICAgIGdyaWRTaXplOiAyMCxcbiAgICB0aWxlU2l6ZU11bHRpcGxpZXI6IDAuOSxcbiAgICBnZXQgdGlsZVNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyaWRTaXplICogdGhpcy50aWxlU2l6ZU11bHRpcGxpZXI7XG4gICAgfSxcbiAgICBnZXQgY2FudmFzU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZFNpemUgKiB0aGlzLmdyaWRTaXplO1xuICAgIH0sXG4gICAgZ2V0IHN0YXJ0UG9zaXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7IHg6IHRoaXMuZ3JpZFNpemUgLyAyLCB5OiB0aGlzLmdyaWRTaXplIC8gMiB9O1xuICAgIH0sXG4gICAgc3RhcnRGcHM6IDYsXG4gICAgc3RhcnRUYWlsU2l6ZTogNVxufTtcbmV4cG9ydCBjb25zdCB2ZWxvY2l0eUJ5S2V5Q29kZSA9IHtcbiAgICAvLyB0aGVzZSBzaG91bGQgcmVhbGx5IGFjY291bnQgZm9yIHRoZSB0aWxlU2l6ZVxuICAgIDM3OiB7IHg6IC0xLCB5OiAwIH0sXG4gICAgMzg6IHsgeDogMCwgeTogLTEgfSxcbiAgICAzOTogeyB4OiAxLCB5OiAwIH0sXG4gICAgNDA6IHsgeDogMCwgeTogMSB9XG59O1xuIiwiaW1wb3J0IHsgYWN0aW9uLCBjb21wdXRlZCwgY29uZmlndXJlLCBtYWtlT2JzZXJ2YWJsZSwgb2JzZXJ2YWJsZSwgb25CZWNvbWVPYnNlcnZlZCwgb25CZWNvbWVVbm9ic2VydmVkIH0gZnJvbSAnbW9ieCc7XG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ09OU1RBTlRTIH0gZnJvbSAnLi9nYW1lQ29uc3RhbnRzJztcbi8vIHdpdGhvdXQgY29uZmlndXJpbmcgZW5mb3JjZUFjdGlvbnMgaXQgd291bGQgYmUgcG9zc2libGUgdG8gbW9kaWZ5IGFueSBvYnNlcnZhYmxlIGZyb20gYW55d2hlcmVcbmNvbmZpZ3VyZSh7IGVuZm9yY2VBY3Rpb25zOiAnb2JzZXJ2ZWQnIH0pO1xuLy8gYmFzZSBjbGFzc1xuZXhwb3J0IGNsYXNzIEdhbWVTdG9yZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZ3JpZFNpemUgPSBDT05TVEFOVFMuZ3JpZFNpemU7XG4gICAgICAgIC8vIGluaXRpYWwgZ2FtZSBzdGF0ZSwgcGxheWVyIGlzIGNlbnRlcmVkIHdpdGggbm8gdmVsb2NpdHlcbiAgICAgICAgdGhpcy5wbGF5ZXJQb3NpdGlvbiA9IENPTlNUQU5UUy5zdGFydFBvc2l0aW9uO1xuICAgICAgICB0aGlzLnZlbG9jaXR5ID0ge1xuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDBcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50cmFpbCA9IFtDT05TVEFOVFMuc3RhcnRQb3NpdGlvbl07XG4gICAgICAgIHRoaXMudGFpbFNpemUgPSBDT05TVEFOVFMuc3RhcnRUYWlsU2l6ZTtcbiAgICAgICAgLy8gaG91c2VrZWVwaW5nIHRvIGNvbnRyb2wgYW5pbWF0aW9uXG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgICAgICAvLyB1c2UgdG8gY29udHJvbCBmcHMgYW5kIHRoZXJlZm9yZSBnYW1lIHNwZWVkXG4gICAgICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMuZnBzID0gQ09OU1RBTlRTLnN0YXJ0RnBzO1xuICAgICAgICB0aGlzLnN1c3BlbmRHYW1lID0gYWN0aW9uKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdGFydEdhbWUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy50aWNrKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIHJlbmRlciBsb29wIGNvbnRyb2xcbiAgICAgICAgICAgIGlmICh0aGlzLnJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy50aWNrKCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZWxhcHNlZCA9IG5vdyAtIHRoaXMubGFzdEZyYW1lVGltZTtcbiAgICAgICAgICAgICAgICAvLyByZW5kZXIgc3BlZWQgY29udHJvbFxuICAgICAgICAgICAgICAgIGlmIChlbGFwc2VkID4gdGhpcy5mcmFtZUludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IG5vdyAtIChlbGFwc2VkICUgdGhpcy5mcmFtZUludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQbGF5ZXJQb3NpdGlvbih0aGlzLnBsYXllclBvc2l0aW9uLCB0aGlzLnZlbG9jaXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXBkYXRlUGxheWVyUG9zaXRpb24gPSBhY3Rpb24oKHsgeDogcHgsIHk6IHB5IH0sIHsgeDogdngsIHk6IHZ5IH0pID0+IHtcbiAgICAgICAgICAgIGlmICh2eCB8fCB2eSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BsYXllclBvc2l0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICB4OiBweCArIHZ4LFxuICAgICAgICAgICAgICAgICAgICB5OiBweSArIHZ5XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAobmV3UGxheWVyUG9zaXRpb24ueCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3UGxheWVyUG9zaXRpb24ueCA9IHRoaXMuZ3JpZFNpemUgLSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV3UGxheWVyUG9zaXRpb24ueCA+IHRoaXMuZ3JpZFNpemUgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1BsYXllclBvc2l0aW9uLnggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV3UGxheWVyUG9zaXRpb24ueSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3UGxheWVyUG9zaXRpb24ueSA9IHRoaXMuZ3JpZFNpemUgLSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV3UGxheWVyUG9zaXRpb24ueSA+IHRoaXMuZ3JpZFNpemUgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1BsYXllclBvc2l0aW9uLnkgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllclBvc2l0aW9uID0gbmV3UGxheWVyUG9zaXRpb247XG4gICAgICAgICAgICAgICAgdGhpcy50cmFpbCA9IHRoaXMudHJhaWwuY29uY2F0KG5ld1BsYXllclBvc2l0aW9uKS5zbGljZSgtdGhpcy50YWlsU2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldFZlbG9jaXR5ID0gYWN0aW9uKChuZXdWZWxvY2l0eSkgPT4ge1xuICAgICAgICAgICAgdGhpcy52ZWxvY2l0eSA9IG5ld1ZlbG9jaXR5O1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRUYWlsU2l6ZSA9IGFjdGlvbigodGFpbFNpemUpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGFpbFNpemUgPSB0YWlsU2l6ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0RlBTID0gYWN0aW9uKChmcHMpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZnBzID0gZnBzO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRQbGF5ZXJQb3NpdGlvbiA9IGFjdGlvbigobmV3UGxheWVyUG9zaXRpb24pID0+IHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyUG9zaXRpb24gPSBuZXdQbGF5ZXJQb3NpdGlvbjtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2V0UmFuZG9tUG9zaXRpb24gPSAoKSA9PiAoe1xuICAgICAgICAgICAgeDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5ncmlkU2l6ZSksXG4gICAgICAgICAgICB5OiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmdyaWRTaXplKVxuICAgICAgICB9KTtcbiAgICAgICAgbWFrZU9ic2VydmFibGUodGhpcywge1xuICAgICAgICAgICAgcGxheWVyUG9zaXRpb246IG9ic2VydmFibGUsXG4gICAgICAgICAgICB0cmFpbDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIHRhaWxTaXplOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgZnJhbWVJbnRlcnZhbDogY29tcHV0ZWQsXG4gICAgICAgICAgICBzY29yZTogY29tcHV0ZWQsXG4gICAgICAgICAgICBydW5uaW5nOiBvYnNlcnZhYmxlXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBzZXR1cCBsYXp5IG9ic2VydmFibGVzXG4gICAgICAgIG9uQmVjb21lT2JzZXJ2ZWQodGhpcywgJ3BsYXllclBvc2l0aW9uJywgdGhpcy5zdGFydEdhbWUpO1xuICAgICAgICBvbkJlY29tZVVub2JzZXJ2ZWQodGhpcywgJ3BsYXllclBvc2l0aW9uJywgdGhpcy5zdXNwZW5kR2FtZSk7XG4gICAgfVxuICAgIGdldCBmcmFtZUludGVydmFsKCkge1xuICAgICAgICByZXR1cm4gMTAwMCAvIHRoaXMuZnBzO1xuICAgIH1cbiAgICBnZXQgc2NvcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhaWxTaXplIC0gQ09OU1RBTlRTLnN0YXJ0VGFpbFNpemU7XG4gICAgfVxufVxuLy8gYWxsIHJlZmVyZW5jZXMgc2hvdWxkIHBvaW50IHRvIHRoaXMgc2luZ2xldG9uLlxuLy8gSWYgc3RvcmUgaXMgYWNjZXNzZWQgb3V0c2lkZSBvZiB1c2VDb250ZXh0IChlLmcuIG91dHNpZGUgb2YgUmVhY3QpIHlvdSBuZWVkIHRvIHVzZSB0aGlzIGluc3RhbmNlICh1bmxlc3MgeW91IHdhbnQgbXVsdGlwbGUgc3RvcmVzKSFcbmV4cG9ydCBjb25zdCBHYW1lU3RvcmVJbnN0YW5jZSA9IG5ldyBHYW1lU3RvcmUoKTtcbmV4cG9ydCBjb25zdCBHYW1lU3RvcmVDb250ZXh0ID0gY3JlYXRlQ29udGV4dChHYW1lU3RvcmVJbnN0YW5jZSk7XG4iLCJ2YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcbiAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuZXhwb3J0IGNvbnN0IExhenlQbHVnaW5Qcm92aWRlciA9IChfYSkgPT4ge1xuICAgIHZhciB7IFBsdWdpbiwgYXN5bmNMb2FkIH0gPSBfYSwgcmVzdCA9IF9fcmVzdChfYSwgW1wiUGx1Z2luXCIsIFwiYXN5bmNMb2FkXCJdKTtcbiAgICBjb25zdCBbZ2FtZVN0b3JlLCBzZXRHYW1lU3RvcmVdID0gUmVhY3QudXNlU3RhdGUobnVsbCk7XG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgYXN5bmNMb2FkKCkudGhlbigobW9kdWxlKSA9PiBzZXRHYW1lU3RvcmUobW9kdWxlLkdhbWVTdG9yZUluc3RhbmNlKSk7XG4gICAgfSwgW10pO1xuICAgIHJldHVybiBnYW1lU3RvcmUgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFBsdWdpbiwgT2JqZWN0LmFzc2lnbih7IGdhbWVTdG9yZTogZ2FtZVN0b3JlIH0sIHJlc3QpKSA6IG51bGw7XG59O1xuIiwiZXhwb3J0ICogZnJvbSAnLi9nYW1lQ29uc3RhbnRzJztcbmV4cG9ydCAqIGZyb20gJy4vZ2FtZVN0b3JlJztcbmV4cG9ydCAqIGZyb20gJy4vbGF6eVBsdWdpblByb3ZpZGVyJztcbiIsImV4cG9ydCAqIGZyb20gJy4vc3JjJztcbiIsImltcG9ydCB7IENPTlNUQU5UUywgTGF6eVBsdWdpblByb3ZpZGVyIH0gZnJvbSAnQG1pY3JvLXNuYWtlL2VuZ2luZSc7XG5pbXBvcnQgeyBvYnNlcnZlciB9IGZyb20gJ21vYngtcmVhY3QnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IExheWVyLCBTdGFyIH0gZnJvbSAncmVhY3Qta29udmEnO1xuY29uc3QgUkVEVUNUSU9OX0FNT1VOVCA9IDI7XG5jb25zdCBSRURVQ1RJT05fTEVOR1RIID0gNTAwMDtcbmNvbnN0IFRlbGVwb3J0ID0gb2JzZXJ2ZXIoZnVuY3Rpb24gKHsgZ2FtZVN0b3JlIH0pIHtcbiAgICBjb25zdCB7IHBsYXllclBvc2l0aW9uLCBzZXRGUFMsIGdldFJhbmRvbVBvc2l0aW9uLCBzZXRQbGF5ZXJQb3NpdGlvbiB9ID0gZ2FtZVN0b3JlO1xuICAgIGNvbnN0IFt0ZWxlcG9ydFBvc2l0aW9uLCBzZXRQbHVtUG9zaXRpb25dID0gUmVhY3QudXNlU3RhdGUoZ2V0UmFuZG9tUG9zaXRpb24oKSk7XG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHRlbGVwb3J0UG9zaXRpb24ueCA9PT0gcGxheWVyUG9zaXRpb24ueCAmJlxuICAgICAgICAgICAgdGVsZXBvcnRQb3NpdGlvbi55ID09PSBwbGF5ZXJQb3NpdGlvbi55KSB7XG4gICAgICAgICAgICAvLyBtb3ZlIHRoZSB0ZWxlcG9ydFxuICAgICAgICAgICAgc2V0UGx1bVBvc2l0aW9uKGdldFJhbmRvbVBvc2l0aW9uKTtcbiAgICAgICAgICAgIC8vIHRlbGVwb3J0IHRoZSBwbGF5ZXJcbiAgICAgICAgICAgIHNldFBsYXllclBvc2l0aW9uKGdldFJhbmRvbVBvc2l0aW9uKCkpO1xuICAgICAgICAgICAgLy8gdGVtcG9yYXJpbHkgZGVjcmVhc2Ugc3BlZWQgZm9yIGJldHRlciBzdXJ2aXZhbCBvZGRzXG4gICAgICAgICAgICBzZXRGUFMoZ2FtZVN0b3JlLmZwcyAtIFJFRFVDVElPTl9BTU9VTlQpO1xuICAgICAgICAgICAgLy8gZXZlbnR1YWxseSByZW1vdmUgdGhlIHNwZWVkIGJ1ZmZcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0RlBTKGdhbWVTdG9yZS5mcHMgKyBSRURVQ1RJT05fQU1PVU5UKSwgUkVEVUNUSU9OX0xFTkdUSCk7XG4gICAgICAgIH1cbiAgICB9LCBbdGVsZXBvcnRQb3NpdGlvbiwgcGxheWVyUG9zaXRpb25dKTtcbiAgICBjb25zdCBzdGFyU2l6ZSA9IENPTlNUQU5UUy50aWxlU2l6ZSAvIDI7XG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KExheWVyLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KFN0YXIsIHsgaW5uZXJSYWRpdXM6IHN0YXJTaXplLCBudW1Qb2ludHM6IDUsIG91dGVyUmFkaXVzOiBzdGFyU2l6ZSwgb2Zmc2V0OiB7IHg6IC1zdGFyU2l6ZSwgeTogLXN0YXJTaXplIH0sIHN0cm9rZTogJ29yYW5nZScsIHdpZHRoOiBzdGFyU2l6ZSwgaGVpZ2h0OiBzdGFyU2l6ZSwgeDogdGVsZXBvcnRQb3NpdGlvbi54ICogQ09OU1RBTlRTLmdyaWRTaXplLCB5OiB0ZWxlcG9ydFBvc2l0aW9uLnkgKiBDT05TVEFOVFMuZ3JpZFNpemUgfSkpKTtcbn0pO1xuZXhwb3J0IHsgVGVsZXBvcnQgfTtcbmV4cG9ydCBkZWZhdWx0ICgoKSA9PiBSZWFjdC5jcmVhdGVFbGVtZW50KExhenlQbHVnaW5Qcm92aWRlciwgeyBQbHVnaW46IFRlbGVwb3J0LCBhc3luY0xvYWQ6ICgpID0+IGltcG9ydCgnZW5naW5lL1N0b3JlJykgfSkpO1xuIiwiaW1wb3J0IHsgQ09OU1RBTlRTIGFzIEdhbWVDb25zdGFudHMsIExhenlQbHVnaW5Qcm92aWRlciB9IGZyb20gJ0BtaWNyby1zbmFrZS9lbmdpbmUnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHsgU3RhZ2UgfSBmcm9tICdyZWFjdC1rb252YSc7XG5pbXBvcnQgeyBUZWxlcG9ydCB9IGZyb20gJy4vYXBwJztcblJlYWN0RE9NLnJlbmRlcihSZWFjdC5jcmVhdGVFbGVtZW50KFN0YWdlLCB7IHdpZHRoOiBHYW1lQ29uc3RhbnRzLmNhbnZhc1NpemUsIGhlaWdodDogR2FtZUNvbnN0YW50cy5jYW52YXNTaXplIH0sXG4gICAgUmVhY3QuY3JlYXRlRWxlbWVudChMYXp5UGx1Z2luUHJvdmlkZXIsIHsgUGx1Z2luOiBUZWxlcG9ydCwgYXN5bmNMb2FkOiAoKSA9PiBpbXBvcnQoJ2VuZ2luZS9TdG9yZScpIH0pKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///374\n")}}]);