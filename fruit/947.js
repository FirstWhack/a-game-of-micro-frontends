(self.webpackChunk_micro_snake_plugin_fruit=self.webpackChunk_micro_snake_plugin_fruit||[]).push([[947],{883:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(654),o=i(713),a=r(i(691)),s=i(903),u=(0,o.observer)((function(e){var t=e.gameStore,i=t.playerPosition,r=t.setFPS,o=t.getRandomPosition,u=a.default.useState(o()),l=u[0],c=u[1];return a.default.useEffect((function(){l.x===i.x&&l.y===i.y&&(c(o),r(t.fps+2),setTimeout((function(){return r(t.fps-2)}),5e3))}),[l,i]),a.default.createElement(s.Rect,{stroke:"purple",width:n.CONSTANTS.tileSize,height:n.CONSTANTS.tileSize,x:l.x*n.CONSTANTS.gridSize,y:l.y*n.CONSTANTS.gridSize})}));t.default=u},947:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(713),o=r(i(691)),a=i(903),s=r(i(883)),u=(0,n.observer)((function(e){var t=e.gameStore,i=t.score,r=o.default.useMemo((function(){return Array.from(Array(Math.max(Math.ceil(.25*i),1)),(function(){return o.default.createElement(s.default,{gameStore:t})}))}),[i]);return o.default.createElement(a.Layer,null,r)}));t.default=u},654:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(648),t)},460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.velocityByKeyCode=t.CONSTANTS=void 0,t.CONSTANTS={gridSize:20,tileSizeMultiplier:.9,get tileSize(){return this.gridSize*this.tileSizeMultiplier},get canvasSize(){return this.gridSize*this.gridSize},get startPosition(){return{x:this.gridSize/2,y:this.gridSize/2}},startFps:6,startTailSize:5},t.velocityByKeyCode={37:{x:-1,y:0},38:{x:0,y:-1},39:{x:1,y:0},40:{x:0,y:1}}},896:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameStoreContext=t.GameStoreInstance=t.GameStore=void 0;var r=i(284),n=i(691),o=i(460);(0,r.configure)({enforceActions:"observed"});var a=function(){function e(){var e=this;this.gridSize=o.CONSTANTS.gridSize,this.playerPosition=o.CONSTANTS.startPosition,this.velocity={x:0,y:0},this.trail=[o.CONSTANTS.startPosition],this.tailSize=o.CONSTANTS.startTailSize,this.running=!1,this.lastFrameTime=Date.now(),this.fps=o.CONSTANTS.startFps,this.suspendGame=(0,r.action)((function(){e.running=!1})),this.startGame=function(){e.running=!0,e.tick()},this.tick=function(){if(e.running){requestAnimationFrame((function(){return e.tick()}));var t=Date.now(),i=t-e.lastFrameTime;i>e.frameInterval&&(e.lastFrameTime=t-i%e.frameInterval,e.updatePlayerPosition(e.playerPosition,e.velocity))}},this.updatePlayerPosition=(0,r.action)((function(t,i){var r=t.x,n=t.y,o=i.x,a=i.y;if(o||a){var s={x:r+o,y:n+a};s.x<0&&(s.x=e.gridSize-1),s.x>e.gridSize-1&&(s.x=0),s.y<0&&(s.y=e.gridSize-1),s.y>e.gridSize-1&&(s.y=0),e.playerPosition=s,e.trail=e.trail.concat(s).slice(-e.tailSize)}})),this.setVelocity=(0,r.action)((function(t){e.velocity=t})),this.setTailSize=(0,r.action)((function(t){e.tailSize=t})),this.setFPS=(0,r.action)((function(t){e.fps=t})),this.setPlayerPosition=(0,r.action)((function(t){e.playerPosition=t})),this.getRandomPosition=function(){return{x:Math.floor(Math.random()*e.gridSize),y:Math.floor(Math.random()*e.gridSize)}},(0,r.makeObservable)(this,{playerPosition:r.observable,trail:r.observable,tailSize:r.observable,frameInterval:r.computed,score:r.computed,running:r.observable}),(0,r.onBecomeObserved)(this,"playerPosition",this.startGame),(0,r.onBecomeUnobserved)(this,"playerPosition",this.suspendGame)}return Object.defineProperty(e.prototype,"frameInterval",{get:function(){return 1e3/this.fps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this.tailSize-o.CONSTANTS.startTailSize},enumerable:!1,configurable:!0}),e}();t.GameStore=a,t.GameStoreInstance=new a,t.GameStoreContext=(0,n.createContext)(t.GameStoreInstance)},648:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(460),t),n(i(896),t),n(i(626),t)},626:function(e,t,i){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)},n=this&&this.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LazyPluginProvider=void 0;var a=o(i(691));t.LazyPluginProvider=function(e){var t=e.Plugin,i=e.asyncLoad,o=n(e,["Plugin","asyncLoad"]),s=a.default.useState(null),u=s[0],l=s[1];return a.default.useEffect((function(){i().then((function(e){return l(e.GameStoreInstance)}))}),[]),u?a.default.createElement(t,r({gameStore:u},o)):null}}}]);