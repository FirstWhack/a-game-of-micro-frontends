"use strict";(self.webpackChunk_micro_snake_game=self.webpackChunk_micro_snake_game||[]).push([[969],{8969:(t,e,i)=>{i.r(e),i.d(e,{default:()=>ft});var a=i(3276),r=i(6749),n=i(9946),s=i(9241),h=i(6834);class o extends n.b{_sceneFunc(t){var e=s.So.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),i=this.clockwise(),a=s.So.getAngle(i?360-this.angle():this.angle()),r=Math.cos(Math.min(a,Math.PI)),n=Math.sin(Math.min(Math.max(Math.PI,a),3*Math.PI/2)),h=Math.sin(Math.min(a,Math.PI/2)),o=r*(r>0?t:e),d=n*(n>0?t:e),g=h*(h>0?e:t);return{x:o,y:i?-1*g:d,width:1*e-o,height:g-d}}}function d(t,e,i,a,r,n,s){var h=Math.sqrt(Math.pow(i-t,2)+Math.pow(a-e,2)),o=Math.sqrt(Math.pow(r-i,2)+Math.pow(n-a,2)),d=s*h/(h+o),g=s*o/(h+o);return[i-d*(r-t),a-d*(n-e),i+g*(r-t),a+g*(n-e)]}function g(t,e){var i,a,r=t.length,n=[];for(i=2;i<r-2;i+=2)a=d(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),isNaN(a[0])||(n.push(a[0]),n.push(a[1]),n.push(t[i]),n.push(t[i+1]),n.push(a[2]),n.push(a[3]));return n}o.prototype._centroid=!0,o.prototype.className="Arc",o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s.DA)(o),r.F.addGetterSetter(o,"innerRadius",0,(0,h.Kg)()),r.F.addGetterSetter(o,"outerRadius",0,(0,h.Kg)()),r.F.addGetterSetter(o,"angle",0,(0,h.Kg)()),r.F.addGetterSetter(o,"clockwise",!1,(0,h.I0)());class l extends n.b{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")}))}_sceneFunc(t){var e,i,a,r=this.points(),n=r.length,s=this.tension(),h=this.closed(),o=this.bezier();if(n){if(t.beginPath(),t.moveTo(r[0],r[1]),0!==s&&n>4){for(i=(e=this.getTensionPoints()).length,a=h?0:4,h||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);a<i-2;)t.bezierCurveTo(e[a++],e[a++],e[a++],e[a++],e[a++],e[a++]);h||t.quadraticCurveTo(e[i-2],e[i-1],r[n-2],r[n-1])}else if(o)for(a=2;a<n;)t.bezierCurveTo(r[a++],r[a++],r[a++],r[a++],r[a++],r[a++]);else for(a=2;a<n;a+=2)t.lineTo(r[a],r[a+1]);h?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():g(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),e=t.length,i=this.tension(),a=d(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),r=d(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),n=g(t,i);return[a[2],a[3]].concat(n).concat([r[0],r[1],t[e-2],t[e-1],r[2],r[3],a[0],a[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,i,a=(t=0!==this.tension()?[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.points())[0],r=t[0],n=t[1],s=t[1],h=0;h<t.length/2;h++)e=t[2*h],i=t[2*h+1],a=Math.min(a,e),r=Math.max(r,e),n=Math.min(n,i),s=Math.max(s,i);return{x:a,y:n,width:r-a,height:s-n}}}l.prototype.className="Line",l.prototype._attrsAffectingSize=["points","bezier","tension"],(0,s.DA)(l),r.F.addGetterSetter(l,"closed",!1),r.F.addGetterSetter(l,"bezier",!1),r.F.addGetterSetter(l,"tension",0,(0,h.Kg)()),r.F.addGetterSetter(l,"points",[],(0,h.q8)());class c extends n.b{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this.dataArray=c.parsePathData(this.data()),this.pathLength=0;for(var e=0;e<this.dataArray.length;++e)this.pathLength+=this.dataArray[e].pathLength;this.on("dataChange.konva",(function(){this.dataArray=c.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength}))}_sceneFunc(t){var e=this.dataArray;t.beginPath();for(var i=!1,a=0;a<e.length;a++){var r=e[a].command,n=e[a].points;switch(r){case"L":t.lineTo(n[0],n[1]);break;case"M":t.moveTo(n[0],n[1]);break;case"C":t.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case"Q":t.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case"A":var s=n[0],h=n[1],o=n[2],d=n[3],g=n[4],l=n[5],c=n[6],f=n[7],u=o>d?o:d,p=o>d?1:o/d,x=o>d?d/o:1;t.translate(s,h),t.rotate(c),t.scale(p,x),t.arc(0,0,u,g,g+l,1-f),t.scale(1/p,1/x),t.rotate(-c),t.translate(-s,-h);break;case"z":i=!0,t.closePath()}}i||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach((function(e){if("A"===e.command){var i=e.points[4],a=e.points[5],r=e.points[4]+a,n=Math.PI/180;if(Math.abs(i-r)<n&&(n=Math.abs(i-r)),a<0)for(let a=i-n;a>r;a-=n){const i=c.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],a,0);t.push(i.x,i.y)}else for(let a=i+n;a<r;a+=n){const i=c.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],a,0);t.push(i.x,i.y)}}else if("C"===e.command)for(let i=0;i<=1;i+=.01){const a=c.getPointOnCubicBezier(i,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);t.push(a.x,a.y)}else t=t.concat(e.points)}));for(var e,i,a=t[0],r=t[0],n=t[1],s=t[1],h=0;h<t.length/2;h++)e=t[2*h],i=t[2*h+1],isNaN(e)||(a=Math.min(a,e),r=Math.max(r,e)),isNaN(i)||(n=Math.min(n,i),s=Math.max(s,i));return{x:a,y:n,width:r-a,height:s-n}}getLength(){return this.pathLength}getPointAtLength(t){var e,i=0,a=this.dataArray.length;if(!a)return null;for(;i<a&&t>this.dataArray[i].pathLength;)t-=this.dataArray[i].pathLength,++i;if(i===a)return{x:(e=this.dataArray[i-1].points.slice(-2))[0],y:e[1]};if(t<.01)return{x:(e=this.dataArray[i].points.slice(0,2))[0],y:e[1]};var r=this.dataArray[i],n=r.points;switch(r.command){case"L":return c.getPointOnLine(t,r.start.x,r.start.y,n[0],n[1]);case"C":return c.getPointOnCubicBezier(t/r.pathLength,r.start.x,r.start.y,n[0],n[1],n[2],n[3],n[4],n[5]);case"Q":return c.getPointOnQuadraticBezier(t/r.pathLength,r.start.x,r.start.y,n[0],n[1],n[2],n[3]);case"A":var s=n[0],h=n[1],o=n[2],d=n[3],g=n[4],l=n[5],f=n[6];return g+=l*t/r.pathLength,c.getPointOnEllipticalArc(s,h,o,d,g,f)}return null}static getLineLength(t,e,i,a){return Math.sqrt((i-t)*(i-t)+(a-e)*(a-e))}static getPointOnLine(t,e,i,a,r,n,s){void 0===n&&(n=e),void 0===s&&(s=i);var h=(r-i)/(a-e+1e-8),o=Math.sqrt(t*t/(1+h*h));a<e&&(o*=-1);var d,g=h*o;if(a===e)d={x:n,y:s+g};else if((s-i)/(n-e+1e-8)===h)d={x:n+o,y:s+g};else{var l,c,f=this.getLineLength(e,i,a,r),u=(n-e)*(a-e)+(s-i)*(r-i);l=e+(u/=f*f)*(a-e),c=i+u*(r-i);var p=this.getLineLength(n,s,l,c),x=Math.sqrt(t*t-p*p);o=Math.sqrt(x*x/(1+h*h)),a<e&&(o*=-1),d={x:l+o,y:c+(g=h*o)}}return d}static getPointOnCubicBezier(t,e,i,a,r,n,s,h,o){function d(t){return t*t*t}function g(t){return 3*t*t*(1-t)}function l(t){return 3*t*(1-t)*(1-t)}function c(t){return(1-t)*(1-t)*(1-t)}return{x:h*d(t)+n*g(t)+a*l(t)+e*c(t),y:o*d(t)+s*g(t)+r*l(t)+i*c(t)}}static getPointOnQuadraticBezier(t,e,i,a,r,n,s){function h(t){return t*t}function o(t){return 2*t*(1-t)}function d(t){return(1-t)*(1-t)}return{x:n*h(t)+a*o(t)+e*d(t),y:s*h(t)+r*o(t)+i*d(t)}}static getPointOnEllipticalArc(t,e,i,a,r,n){var s=Math.cos(n),h=Math.sin(n),o=i*Math.cos(r),d=a*Math.sin(r);return{x:t+(o*s-d*h),y:e+(o*h+d*s)}}static parsePathData(t){if(!t)return[];var e=t,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var a=0;a<i.length;a++)e=e.replace(new RegExp(i[a],"g"),"|"+i[a]);var r,n=e.split("|"),s=[],h=[],o=0,d=0,g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(a=1;a<n.length;a++){var l=n[a],c=l.charAt(0);for(l=l.slice(1),h.length=0;r=g.exec(l);)h.push(r[0]);for(var f=[],u=0,p=h.length;u<p;u++)if("00"!==h[u]){var x=parseFloat(h[u]);isNaN(x)?f.push(0):f.push(x)}else f.push(0,0);for(;f.length>0&&!isNaN(f[0]);){var v,m,S,y,_,b,M,F,w,A,T=null,k=[],P=o,C=d;switch(c){case"l":o+=f.shift(),d+=f.shift(),T="L",k.push(o,d);break;case"L":o=f.shift(),d=f.shift(),k.push(o,d);break;case"m":var G=f.shift(),N=f.shift();if(o+=G,d+=N,T="M",s.length>2&&"z"===s[s.length-1].command)for(var O=s.length-2;O>=0;O--)if("M"===s[O].command){o=s[O].points[0]+G,d=s[O].points[1]+N;break}k.push(o,d),c="l";break;case"M":o=f.shift(),d=f.shift(),T="M",k.push(o,d),c="L";break;case"h":o+=f.shift(),T="L",k.push(o,d);break;case"H":o=f.shift(),T="L",k.push(o,d);break;case"v":d+=f.shift(),T="L",k.push(o,d);break;case"V":d=f.shift(),T="L",k.push(o,d);break;case"C":k.push(f.shift(),f.shift(),f.shift(),f.shift()),o=f.shift(),d=f.shift(),k.push(o,d);break;case"c":k.push(o+f.shift(),d+f.shift(),o+f.shift(),d+f.shift()),o+=f.shift(),d+=f.shift(),T="C",k.push(o,d);break;case"S":m=o,S=d,"C"===(v=s[s.length-1]).command&&(m=o+(o-v.points[2]),S=d+(d-v.points[3])),k.push(m,S,f.shift(),f.shift()),o=f.shift(),d=f.shift(),T="C",k.push(o,d);break;case"s":m=o,S=d,"C"===(v=s[s.length-1]).command&&(m=o+(o-v.points[2]),S=d+(d-v.points[3])),k.push(m,S,o+f.shift(),d+f.shift()),o+=f.shift(),d+=f.shift(),T="C",k.push(o,d);break;case"Q":k.push(f.shift(),f.shift()),o=f.shift(),d=f.shift(),k.push(o,d);break;case"q":k.push(o+f.shift(),d+f.shift()),o+=f.shift(),d+=f.shift(),T="Q",k.push(o,d);break;case"T":m=o,S=d,"Q"===(v=s[s.length-1]).command&&(m=o+(o-v.points[0]),S=d+(d-v.points[1])),o=f.shift(),d=f.shift(),T="Q",k.push(m,S,o,d);break;case"t":m=o,S=d,"Q"===(v=s[s.length-1]).command&&(m=o+(o-v.points[0]),S=d+(d-v.points[1])),o+=f.shift(),d+=f.shift(),T="Q",k.push(m,S,o,d);break;case"A":y=f.shift(),_=f.shift(),b=f.shift(),M=f.shift(),F=f.shift(),w=o,A=d,o=f.shift(),d=f.shift(),T="A",k=this.convertEndpointToCenterParameterization(w,A,o,d,M,F,y,_,b);break;case"a":y=f.shift(),_=f.shift(),b=f.shift(),M=f.shift(),F=f.shift(),w=o,A=d,o+=f.shift(),d+=f.shift(),T="A",k=this.convertEndpointToCenterParameterization(w,A,o,d,M,F,y,_,b)}s.push({command:T||c,points:k,start:{x:P,y:C},pathLength:this.calcLength(P,C,T||c,k)})}"z"!==c&&"Z"!==c||s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(t,e,i,a){var r,n,s,h,o=c;switch(i){case"L":return o.getLineLength(t,e,a[0],a[1]);case"C":for(r=0,n=o.getPointOnCubicBezier(0,t,e,a[0],a[1],a[2],a[3],a[4],a[5]),h=.01;h<=1;h+=.01)s=o.getPointOnCubicBezier(h,t,e,a[0],a[1],a[2],a[3],a[4],a[5]),r+=o.getLineLength(n.x,n.y,s.x,s.y),n=s;return r;case"Q":for(r=0,n=o.getPointOnQuadraticBezier(0,t,e,a[0],a[1],a[2],a[3]),h=.01;h<=1;h+=.01)s=o.getPointOnQuadraticBezier(h,t,e,a[0],a[1],a[2],a[3]),r+=o.getLineLength(n.x,n.y,s.x,s.y),n=s;return r;case"A":r=0;var d=a[4],g=a[5],l=a[4]+g,f=Math.PI/180;if(Math.abs(d-l)<f&&(f=Math.abs(d-l)),n=o.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],d,0),g<0)for(h=d-f;h>l;h-=f)s=o.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],h,0),r+=o.getLineLength(n.x,n.y,s.x,s.y),n=s;else for(h=d+f;h<l;h+=f)s=o.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],h,0),r+=o.getLineLength(n.x,n.y,s.x,s.y),n=s;return s=o.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),r+o.getLineLength(n.x,n.y,s.x,s.y)}return 0}static convertEndpointToCenterParameterization(t,e,i,a,r,n,s,h,o){var d=o*(Math.PI/180),g=Math.cos(d)*(t-i)/2+Math.sin(d)*(e-a)/2,l=-1*Math.sin(d)*(t-i)/2+Math.cos(d)*(e-a)/2,c=g*g/(s*s)+l*l/(h*h);c>1&&(s*=Math.sqrt(c),h*=Math.sqrt(c));var f=Math.sqrt((s*s*(h*h)-s*s*(l*l)-h*h*(g*g))/(s*s*(l*l)+h*h*(g*g)));r===n&&(f*=-1),isNaN(f)&&(f=0);var u=f*s*l/h,p=f*-h*g/s,x=(t+i)/2+Math.cos(d)*u-Math.sin(d)*p,v=(e+a)/2+Math.sin(d)*u+Math.cos(d)*p,m=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},S=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(m(t)*m(e))},y=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(S(t,e))},_=y([1,0],[(g-u)/s,(l-p)/h]),b=[(g-u)/s,(l-p)/h],M=[(-1*g-u)/s,(-1*l-p)/h],F=y(b,M);return S(b,M)<=-1&&(F=Math.PI),S(b,M)>=1&&(F=0),0===n&&F>0&&(F-=2*Math.PI),1===n&&F<0&&(F+=2*Math.PI),[x,v,s,h,_,F,d,n]}}c.prototype.className="Path",c.prototype._attrsAffectingSize=["data"],(0,s.DA)(c),r.F.addGetterSetter(c,"data");class f extends l{_sceneFunc(t){super._sceneFunc(t);var e=2*Math.PI,i=this.points(),a=i,r=0!==this.tension()&&i.length>4;r&&(a=this.getTensionPoints());var n,s,h=this.pointerLength(),o=i.length;if(r){const t=[a[a.length-4],a[a.length-3],a[a.length-2],a[a.length-1],i[o-2],i[o-1]],e=c.calcLength(a[a.length-4],a[a.length-3],"C",t),r=c.getPointOnQuadraticBezier(Math.min(1,1-h/e),t[0],t[1],t[2],t[3],t[4],t[5]);n=i[o-2]-r.x,s=i[o-1]-r.y}else n=i[o-2]-i[o-4],s=i[o-1]-i[o-3];var d=(Math.atan2(s,n)+e)%e,g=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[o-2],i[o-1]),t.rotate(d),t.moveTo(0,0),t.lineTo(-h,g/2),t.lineTo(-h,-g/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),r?(n=(a[0]+a[2])/2-i[0],s=(a[1]+a[3])/2-i[1]):(n=i[2]-i[0],s=i[3]-i[1]),t.rotate((Math.atan2(-s,-n)+e)%e),t.moveTo(0,0),t.lineTo(-h,g/2),t.lineTo(-h,-g/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}}}f.prototype.className="Arrow",(0,s.DA)(f),r.F.addGetterSetter(f,"pointerLength",10,(0,h.Kg)()),r.F.addGetterSetter(f,"pointerWidth",10,(0,h.Kg)()),r.F.addGetterSetter(f,"pointerAtBeginning",!1),r.F.addGetterSetter(f,"pointerAtEnding",!0);class u extends n.b{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}u.prototype._centroid=!0,u.prototype.className="Circle",u.prototype._attrsAffectingSize=["radius"],(0,s.DA)(u),r.F.addGetterSetter(u,"radius",0,(0,h.Kg)());class p extends n.b{_sceneFunc(t){var e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}p.prototype.className="Ellipse",p.prototype._centroid=!0,p.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,s.DA)(p),r.F.addComponentsGetterSetter(p,"radius",["x","y"]),r.F.addGetterSetter(p,"radiusX",0,(0,h.Kg)()),r.F.addGetterSetter(p,"radiusY",0,(0,h.Kg)());var x=i(9782);class v extends n.b{constructor(t){super(t),this.on("imageChange.konva",(()=>{this._setImageLoad()})),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&4===t.readyState||t&&t.addEventListener&&t.addEventListener("load",(()=>{this._requestDraw()}))}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),i=this.getHeight(),a=this.attrs.image;let r;if(a){const t=this.attrs.cropWidth,n=this.attrs.cropHeight;r=t&&n?[a,this.cropX(),this.cropY(),t,n,0,0,e,i]:[a,0,0,e,i]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)),a&&t.drawImage.apply(t,r)}_hitFunc(t){var e=this.width(),i=this.height();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width}getHeight(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height}static fromURL(t,e,i=null){var a=x.Z.createImageElement();a.onload=function(){var t=new v({image:a});e(t)},a.onerror=i,a.crossOrigin="Anonymous",a.src=t}}v.prototype.className="Image",(0,s.DA)(v),r.F.addGetterSetter(v,"image"),r.F.addComponentsGetterSetter(v,"crop",["x","y","width","height"]),r.F.addGetterSetter(v,"cropX",0,(0,h.Kg)()),r.F.addGetterSetter(v,"cropY",0,(0,h.Kg)()),r.F.addGetterSetter(v,"cropWidth",0,(0,h.Kg)()),r.F.addGetterSetter(v,"cropHeight",0,(0,h.Kg)());var m=i(7529),S=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],y="up",_="right",b="down",M="left",F=S.length;class w extends m.Z{constructor(t){super(t),this.on("add.konva",(function(t){this._addListeners(t.child),this._sync()}))}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var e,i=this,a=function(){i._sync()};for(e=0;e<F;e++)t.on(S[e]+"Change.konva",a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t,e,i,a,r,n,s,h=this.getText(),o=this.getTag();if(h&&o){switch(t=h.width(),e=h.height(),i=o.pointerDirection(),a=o.pointerWidth(),s=o.pointerHeight(),r=0,n=0,i){case y:r=t/2,n=-1*s;break;case _:r=t+a,n=e/2;break;case b:r=t/2,n=e+s;break;case M:r=-1*a,n=e/2}o.setAttrs({x:-1*r,y:-1*n,width:t,height:e}),h.setAttrs({x:-1*r,y:-1*n})}}}w.prototype.className="Label",(0,s.DA)(w);class A extends n.b{_sceneFunc(t){var e=this.width(),i=this.height(),a=this.pointerDirection(),r=this.pointerWidth(),n=this.pointerHeight(),s=this.cornerRadius();let h=0,o=0,d=0,g=0;"number"==typeof s?h=o=d=g=Math.min(s,e/2,i/2):(h=Math.min(s[0]||0,e/2,i/2),o=Math.min(s[1]||0,e/2,i/2),g=Math.min(s[2]||0,e/2,i/2),d=Math.min(s[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(h,0),a===y&&(t.lineTo((e-r)/2,0),t.lineTo(e/2,-1*n),t.lineTo((e+r)/2,0)),t.lineTo(e-o,0),t.arc(e-o,o,o,3*Math.PI/2,0,!1),a===_&&(t.lineTo(e,(i-n)/2),t.lineTo(e+r,i/2),t.lineTo(e,(i+n)/2)),t.lineTo(e,i-g),t.arc(e-g,i-g,g,0,Math.PI/2,!1),a===b&&(t.lineTo((e+r)/2,i),t.lineTo(e/2,i+n),t.lineTo((e-r)/2,i)),t.lineTo(d,i),t.arc(d,i-d,d,Math.PI/2,Math.PI,!1),a===M&&(t.lineTo(0,(i+n)/2),t.lineTo(-1*r,i/2),t.lineTo(0,(i-n)/2)),t.lineTo(0,h),t.arc(h,h,h,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,e=0,i=this.pointerWidth(),a=this.pointerHeight(),r=this.pointerDirection(),n=this.width(),s=this.height();return r===y?(e-=a,s+=a):r===b?s+=a:r===M?(t-=1.5*i,n+=i):r===_&&(n+=1.5*i),{x:t,y:e,width:n,height:s}}}A.prototype.className="Tag",(0,s.DA)(A),r.F.addGetterSetter(A,"pointerDirection","none"),r.F.addGetterSetter(A,"pointerWidth",0,(0,h.Kg)()),r.F.addGetterSetter(A,"pointerHeight",0,(0,h.Kg)()),r.F.addGetterSetter(A,"cornerRadius",0,(0,h.Jj)(4));class T extends n.b{_sceneFunc(t){var e=this.cornerRadius(),i=this.width(),a=this.height();if(t.beginPath(),e){let r=0,n=0,s=0,h=0;"number"==typeof e?r=n=s=h=Math.min(e,i/2,a/2):(r=Math.min(e[0]||0,i/2,a/2),n=Math.min(e[1]||0,i/2,a/2),h=Math.min(e[2]||0,i/2,a/2),s=Math.min(e[3]||0,i/2,a/2)),t.moveTo(r,0),t.lineTo(i-n,0),t.arc(i-n,n,n,3*Math.PI/2,0,!1),t.lineTo(i,a-h),t.arc(i-h,a-h,h,0,Math.PI/2,!1),t.lineTo(s,a),t.arc(s,a-s,s,Math.PI/2,Math.PI,!1),t.lineTo(0,r),t.arc(r,r,r,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,i,a);t.closePath(),t.fillStrokeShape(this)}}T.prototype.className="Rect",(0,s.DA)(T),r.F.addGetterSetter(T,"cornerRadius",0,(0,h.Jj)(4));class k extends n.b{_sceneFunc(t){const e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;i++)t.lineTo(e[i].x,e[i].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,i=[];for(var a=0;a<t;a++)i.push({x:e*Math.sin(2*a*Math.PI/t),y:-1*e*Math.cos(2*a*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();var e=t[0].x,i=t[0].y,a=t[0].x,r=t[0].y;return t.forEach((t=>{e=Math.min(e,t.x),i=Math.max(i,t.x),a=Math.min(a,t.y),r=Math.max(r,t.y)})),{x:e,y:a,width:i-e,height:r-a}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}k.prototype.className="RegularPolygon",k.prototype._centroid=!0,k.prototype._attrsAffectingSize=["radius"],(0,s.DA)(k),r.F.addGetterSetter(k,"radius",0,(0,h.Kg)()),r.F.addGetterSetter(k,"sides",0,(0,h.Kg)());var P=2*Math.PI;class C extends n.b{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,P,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),P,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}C.prototype.className="Ring",C.prototype._centroid=!0,C.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s.DA)(C),r.F.addGetterSetter(C,"innerRadius",0,(0,h.Kg)()),r.F.addGetterSetter(C,"outerRadius",0,(0,h.Kg)());var G=i(3298);class N extends n.b{constructor(t){super(t),this._updated=!0,this.anim=new G.f((()=>{var t=this._updated;return this._updated=!1,t})),this.on("animationChange.konva",(function(){this.frameIndex(0)})),this.on("frameIndexChange.konva",(function(){this._updated=!0})),this.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}))}_sceneFunc(t){var e=this.animation(),i=this.frameIndex(),a=4*i,r=this.animations()[e],n=this.frameOffsets(),s=r[a+0],h=r[a+1],o=r[a+2],d=r[a+3],g=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,o,d),t.closePath(),t.fillStrokeShape(this)),g)if(n){var l=n[e],c=2*i;t.drawImage(g,s,h,o,d,l[c+0],l[c+1],o,d)}else t.drawImage(g,s,h,o,d,0,0,o,d)}_hitFunc(t){var e=this.animation(),i=this.frameIndex(),a=4*i,r=this.animations()[e],n=this.frameOffsets(),s=r[a+2],h=r[a+3];if(t.beginPath(),n){var o=n[e],d=2*i;t.rect(o[d+0],o[d+1],s,h)}else t.rect(0,0,s,h);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)}}N.prototype.className="Sprite",(0,s.DA)(N),r.F.addGetterSetter(N,"animation"),r.F.addGetterSetter(N,"animations"),r.F.addGetterSetter(N,"frameOffsets"),r.F.addGetterSetter(N,"image"),r.F.addGetterSetter(N,"frameIndex",0,(0,h.Kg)()),r.F.addGetterSetter(N,"frameRate",17,(0,h.Kg)()),r.F.backCompat(N,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class O extends n.b{_sceneFunc(t){var e=this.innerRadius(),i=this.outerRadius(),a=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(var r=1;r<2*a;r++){var n=r%2==0?i:e,s=n*Math.sin(r*Math.PI/a),h=-1*n*Math.cos(r*Math.PI/a);t.lineTo(s,h)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}function R(t){return Array.from(t)}O.prototype.className="Star",O.prototype._centroid=!0,O.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s.DA)(O),r.F.addGetterSetter(O,"numPoints",5,(0,h.Kg)()),r.F.addGetterSetter(O,"innerRadius",0,(0,h.Kg)()),r.F.addGetterSetter(O,"outerRadius",0,(0,h.Kg)());var L,I="auto",D="justify",z="left",E="middle",W="normal",K=" ",H=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],B=H.length;function Z(){return L||(L=x.Z.createCanvasElement().getContext("2d"))}class q extends n.b{constructor(t){super(function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(t)),this._partialTextX=0,this._partialTextY=0;for(var e=0;e<B;e++)this.on(H[e]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(t){var e=this.textArr,i=e.length;if(this.text()){var a,r=this.padding(),n=this.fontSize(),s=this.lineHeight()*n,h=this.verticalAlign(),o=0,d=this.align(),g=this.getWidth(),l=this.letterSpacing(),c=this.fill(),f=this.textDecoration(),u=-1!==f.indexOf("underline"),p=-1!==f.indexOf("line-through"),x=0,v=(x=s/2,0),m=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",E),t.setAttr("textAlign",z),h===E?o=(this.getHeight()-i*s-2*r)/2:"bottom"===h&&(o=this.getHeight()-i*s-2*r),t.translate(r,o+r),a=0;a<i;a++){v=0,m=0;var S,y,_,b=e[a],M=b.text,F=b.width,w=b.lastInParagraph;if(t.save(),"right"===d?v+=g-F-2*r:"center"===d&&(v+=(g-F-2*r)/2),u&&(t.save(),t.beginPath(),t.moveTo(v,x+m+Math.round(n/2)),y=0==(S=M.split(" ").length-1),_=d===D&&w&&!y?g-2*r:F,t.lineTo(v+Math.round(_),x+m+Math.round(n/2)),t.lineWidth=n/15,t.strokeStyle=c,t.stroke(),t.restore()),p&&(t.save(),t.beginPath(),t.moveTo(v,x+m),y=0==(S=M.split(" ").length-1),_=d===D&&w&&!y?g-2*r:F,t.lineTo(v+Math.round(_),x+m),t.lineWidth=n/15,t.strokeStyle=c,t.stroke(),t.restore()),0!==l||d===D){S=M.split(" ").length-1;for(var A=R(M),T=0;T<A.length;T++){var k=A[T];" "!==k||w||d!==D||(v+=(g-2*r-F)/S),this._partialTextX=v,this._partialTextY=x+m,this._partialText=k,t.fillStrokeShape(this),v+=this.measureSize(k).width+l}}else this._partialTextX=v,this._partialTextY=x+m,this._partialText=M,t.fillStrokeShape(this);t.restore(),i>1&&(x+=s)}}}_hitFunc(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}setText(t){var e=x.Z._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this}getWidth(){return this.attrs.width===I||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===I||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return x.Z.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,i=Z(),a=this.fontSize();return i.save(),i.font=this._getContextFont(),e=i.measureText(t),i.restore(),{width:e.width,height:a}}_getContextFont(){return this.fontStyle()+K+this.fontVariant()+K+(this.fontSize()+"px ")+this.fontFamily().split(",").map((t=>{const e=(t=t.trim()).indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t=`"${t}"`),t})).join(", ")}_addTextLine(t){this.align()===D&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e,lastInParagraph:!1})}_getTextWidth(t){var e=this.letterSpacing(),i=t.length;return Z().measureText(t).width+(i?e*(i-1):0)}_setTextData(){var t=this.text().split("\n"),e=+this.fontSize(),i=0,a=this.lineHeight()*e,r=this.attrs.width,n=this.attrs.height,s=r!==I&&void 0!==r,h=n!==I&&void 0!==n,o=this.padding(),d=r-2*o,g=n-2*o,l=0,c=this.wrap(),f="none"!==c,u="char"!==c&&f,p=this.ellipsis();this.textArr=[],Z().font=this._getContextFont();for(var x=p?this._getTextWidth("…"):0,v=0,m=t.length;v<m;++v){var S=t[v],y=this._getTextWidth(S);if(s&&y>d)for(;S.length>0;){for(var _=0,b=S.length,M="",F=0;_<b;){var w=_+b>>>1,A=S.slice(0,w+1),T=this._getTextWidth(A)+x;T<=d?(_=w+1,M=A,F=T):b=w}if(!M)break;if(u){var k,P=S[M.length];(k=(P===K||"-"===P)&&F<=d?M.length:Math.max(M.lastIndexOf(K),M.lastIndexOf("-"))+1)>0&&(_=k,M=M.slice(0,_),F=this._getTextWidth(M))}if(M=M.trimRight(),this._addTextLine(M),i=Math.max(i,F),l+=a,!f||h&&l+a>g){var C=this.textArr[this.textArr.length-1];C&&p&&(this._getTextWidth(C.text+"…")<d||(C.text=C.text.slice(0,C.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(C.text+"…"));break}if((S=(S=S.slice(_)).trimLeft()).length>0&&(y=this._getTextWidth(S))<=d){this._addTextLine(S),l+=a,i=Math.max(i,y);break}}else this._addTextLine(S),l+=a,i=Math.max(i,y);if(h&&l+a>g)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=e,this.textWidth=i}getStrokeScaleEnabled(){return!0}}q.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},q.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},q.prototype.className="Text",q.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s.DA)(q),r.F.overWriteSetter(q,"width",(0,h.hi)()),r.F.overWriteSetter(q,"height",(0,h.hi)()),r.F.addGetterSetter(q,"fontFamily","Arial"),r.F.addGetterSetter(q,"fontSize",12,(0,h.Kg)()),r.F.addGetterSetter(q,"fontStyle",W),r.F.addGetterSetter(q,"fontVariant",W),r.F.addGetterSetter(q,"padding",0,(0,h.Kg)()),r.F.addGetterSetter(q,"align",z),r.F.addGetterSetter(q,"verticalAlign","top"),r.F.addGetterSetter(q,"lineHeight",1,(0,h.Kg)()),r.F.addGetterSetter(q,"wrap","word"),r.F.addGetterSetter(q,"ellipsis",!1,(0,h.I0)()),r.F.addGetterSetter(q,"letterSpacing",0,(0,h.Kg)()),r.F.addGetterSetter(q,"text","",(0,h.sY)()),r.F.addGetterSetter(q,"textDecoration","");var Y="normal";function X(t){t.fillText(this.partialText,0,0)}function U(t){t.strokeText(this.partialText,0,0)}class Q extends n.b{constructor(t){super(t),this.dummyCanvas=x.Z.createCanvasElement(),this.dataArray=[],this.dataArray=c.parsePathData(this.attrs.data),this.on("dataChange.konva",(function(){this.dataArray=c.parsePathData(this.attrs.data),this._setTextData()})),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),i=this.fill(),a=this.fontSize(),r=this.glyphInfo;"underline"===e&&t.beginPath();for(var n=0;n<r.length;n++){t.save();var s=r[n].p0;t.translate(s.x,s.y),t.rotate(r[n].rotation),this.partialText=r[n].text,t.fillStrokeShape(this),"underline"===e&&(0===n&&t.moveTo(0,a/2+1),t.lineTo(a,a/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=i,t.lineWidth=a/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var i=e[0].p0;t.moveTo(i.x,i.y)}for(var a=0;a<e.length;a++){var r=e[a].p1;t.lineTo(r.x,r.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return x.Z.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return q.prototype.setText.call(this,t)}_getContextFont(){return q.prototype._getContextFont.call(this)}_getTextSize(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var i=e.measureText(t);return e.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var t=this,e=this._getTextSize(this.attrs.text),i=this.letterSpacing(),a=this.align(),r=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var n=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);this.glyphInfo=[];for(var s=0,h=0;h<t.dataArray.length;h++)t.dataArray[h].pathLength>0&&(s+=t.dataArray[h].pathLength);var o=0;"center"===a&&(o=Math.max(0,s/2-n/2)),"right"===a&&(o=Math.max(0,s-n));for(var d,g,l,f=R(this.text()),u=this.text().split(" ").length-1,p=-1,x=0,v=function(){x=0;for(var e=t.dataArray,i=p+1;i<e.length;i++){if(e[i].pathLength>0)return p=i,e[i];"M"===e[i].command&&(d={x:e[i].points[0],y:e[i].points[1]})}return{}},m=function(e){var r=t._getTextSize(e).width+i;" "===e&&"justify"===a&&(r+=(s-n)/u);var h=0,o=0;for(g=void 0;Math.abs(r-h)/r>.01&&o<20;){o++;for(var f=h;void 0===l;)(l=v())&&f+l.pathLength<r&&(f+=l.pathLength,l=void 0);if(l==={}||void 0===d)return;var p=!1;switch(l.command){case"L":c.getLineLength(d.x,d.y,l.points[0],l.points[1])>r?g=c.getPointOnLine(r,d.x,d.y,l.points[0],l.points[1],d.x,d.y):l=void 0;break;case"A":var m=l.points[4],S=l.points[5],y=l.points[4]+S;0===x?x=m+1e-8:r>h?x+=Math.PI/180*S/Math.abs(S):x-=Math.PI/360*S/Math.abs(S),(S<0&&x<y||S>=0&&x>y)&&(x=y,p=!0),g=c.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],x,l.points[6]);break;case"C":0===x?x=r>l.pathLength?1e-8:r/l.pathLength:r>h?x+=(r-h)/l.pathLength/2:x=Math.max(x-(h-r)/l.pathLength/2,0),x>1&&(x=1,p=!0),g=c.getPointOnCubicBezier(x,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);break;case"Q":0===x?x=r/l.pathLength:r>h?x+=(r-h)/l.pathLength:x-=(h-r)/l.pathLength,x>1&&(x=1,p=!0),g=c.getPointOnQuadraticBezier(x,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3])}void 0!==g&&(h=c.getLineLength(d.x,d.y,g.x,g.y)),p&&(p=!1,l=void 0)}},S=o/(t._getTextSize("C").width+i)-1,y=0;y<S&&(m("C"),void 0!==d&&void 0!==g);y++)d=g;for(var _=0;_<f.length&&(m(f[_]),void 0!==d&&void 0!==g);_++){var b=c.getLineLength(d.x,d.y,g.x,g.y),M=0;if(r)try{M=r(f[_-1],f[_])*this.fontSize()}catch(t){M=0}d.x+=M,g.x+=M,this.textWidth+=M;var F=c.getPointOnLine(M+b/2,d.x,d.y,g.x,g.y),w=Math.atan2(g.y-d.y,g.x-d.x);this.glyphInfo.push({transposeX:F.x,transposeY:F.y,text:f[_],rotation:w,p0:d,p1:g}),d=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));for(var e,i,a=t[0]||0,r=t[0]||0,n=t[1]||0,s=t[1]||0,h=0;h<t.length/2;h++)e=t[2*h],i=t[2*h+1],a=Math.min(a,e),r=Math.max(r,e),n=Math.min(n,i),s=Math.max(s,i);var o=this.fontSize();return{x:a-o/2,y:n-o/2,width:r-a+o,height:s-n+o}}}Q.prototype._fillFunc=X,Q.prototype._strokeFunc=U,Q.prototype._fillFuncHit=X,Q.prototype._strokeFuncHit=U,Q.prototype.className="TextPath",Q.prototype._attrsAffectingSize=["text","fontSize","data"],(0,s.DA)(Q),r.F.addGetterSetter(Q,"data"),r.F.addGetterSetter(Q,"fontFamily","Arial"),r.F.addGetterSetter(Q,"fontSize",12,(0,h.Kg)()),r.F.addGetterSetter(Q,"fontStyle",Y),r.F.addGetterSetter(Q,"align","left"),r.F.addGetterSetter(Q,"letterSpacing",0,(0,h.Kg)()),r.F.addGetterSetter(Q,"textBaseline","middle"),r.F.addGetterSetter(Q,"fontVariant",Y),r.F.addGetterSetter(Q,"text",""),r.F.addGetterSetter(Q,"textDecoration",null),r.F.addGetterSetter(Q,"kerningFunc",null);var j=i(8721),V="tr-konva",$=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map((t=>t+`.${V}`)).join(" "),J="nodesRect",tt=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],et={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const it="ontouchstart"in s.So._global;var at=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function rt(t,e,i){const a=i.x+(t.x-i.x)*Math.cos(e)-(t.y-i.y)*Math.sin(e),r=i.y+(t.x-i.x)*Math.sin(e)+(t.y-i.y)*Math.cos(e);return Object.assign(Object.assign({},t),{rotation:t.rotation+e,x:a,y:r})}class nt extends m.Z{constructor(t){super(t),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on($,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return x.Z.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return V+this._id}setNodes(t=[]){return this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((t=>{const e=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()},i=t._attrsAffectingSize.map((t=>t+"Change."+this._getEventNamespace())).join(" ");t.on(i,e),t.on(tt.map((t=>t+`.${this._getEventNamespace()}`)).join(" "),e),t.on(`absoluteTransformChange.${this._getEventNamespace()}`,e),this._proxyDrag(t)})),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,(i=>{e=t.getAbsolutePosition(),this.isDragging()||t===this.findOne(".back")||this.startDrag(i,!1)})),t.on(`dragmove.${this._getEventNamespace()}`,(i=>{if(!e)return;const a=t.getAbsolutePosition(),r=a.x-e.x,n=a.y-e.y;this.nodes().forEach((e=>{if(e===t)return;if(e.isDragging())return;const a=e.getAbsolutePosition();e.setAbsolutePosition({x:a.x+r,y:a.y+n}),e.startDrag(i)})),e=null}))}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach((t=>{t.off("."+this._getEventNamespace())})),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(J),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(J,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),i){var a=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=t.getAbsoluteScale(i),n=t.getAbsolutePosition(i),h=a.x*r.x-t.offsetX()*r.x,o=a.y*r.y-t.offsetY()*r.y;const d=(s.So.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return rt({x:n.x+h*Math.cos(d)+o*Math.sin(-d),y:n.y+o*Math.cos(d)+h*Math.sin(d),width:a.width*r.x,height:a.height*r.y,rotation:d},-s.So.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map((e=>{const i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var a=[{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height}],r=e.getAbsoluteTransform();a.forEach((function(e){var i=r.point(e);t.push(i)}))}));const e=new x.w;var i,a,r,n;e.rotate(-s.So.getAngle(this.rotation())),t.forEach((function(t){var s=e.point(t);void 0===i&&(i=r=s.x,a=n=s.y),i=Math.min(i,s.x),a=Math.min(a,s.y),r=Math.max(r,s.x),n=Math.max(n,s.y)})),e.invert();const h=e.point({x:i,y:a});return{x:h.x,y:h.y,width:r-i,height:n-a,rotation:s.So.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),at.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")}_createAnchor(t){var e=new T({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:it?10:"auto"}),i=this;e.on("mousedown touchstart",(function(t){i._handleMouseDown(t)})),e.on("dragstart",(t=>{e.stopDrag(),t.cancelBubble=!0})),e.on("dragend",(t=>{t.cancelBubble=!0})),e.on("mouseenter",(()=>{var i=s.So.getAngle(this.rotation()),a=function(t,e){if("rotater"===t)return"crosshair";e+=x.Z.degToRad(et[t]||0);var i=(x.Z.radToDeg(e)%360+360)%360;return x.Z._inRange(i,337.5,360)||x.Z._inRange(i,0,22.5)?"ns-resize":x.Z._inRange(i,22.5,67.5)?"nesw-resize":x.Z._inRange(i,67.5,112.5)?"ew-resize":x.Z._inRange(i,112.5,157.5)?"nwse-resize":x.Z._inRange(i,157.5,202.5)?"ns-resize":x.Z._inRange(i,202.5,247.5)?"nesw-resize":x.Z._inRange(i,247.5,292.5)?"ew-resize":x.Z._inRange(i,292.5,337.5)?"nwse-resize":(x.Z.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}(t,i);e.getStage().content&&(e.getStage().content.style.cursor=a),this._cursorChange=!0})),e.on("mouseout",(()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1})),this.add(e)}_createBack(){var t=new n.b({name:"back",width:0,height:0,draggable:!0,sceneFunc(t){var e=this.getParent(),i=e.padding();t.beginPath(),t.rect(-i,-i,this.width()+2*i,this.height()+2*i),t.moveTo(this.width()/2,-i),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*x.Z._sign(this.height())-i),t.fillStrokeShape(this)},hitFunc:(t,e)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();t.beginPath(),t.rect(-i,-i,e.width()+2*i,e.height()+2*i),t.fillStrokeShape(e)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",(t=>{t.cancelBubble=!0})),t.on("dragmove",(t=>{t.cancelBubble=!0})),t.on("dragend",(t=>{t.cancelBubble=!0})),this.on("dragmove",(t=>{this.update()}))}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),i=e.width,a=e.height,r=Math.sqrt(Math.pow(i,2)+Math.pow(a,2));this.sin=Math.abs(a/r),this.cos=Math.abs(i/r),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var n=t.target.getAbsolutePosition(),s=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:s.x-n.x,y:s.y-n.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach((e=>{e._fire("transformstart",{evt:t.evt,target:e})}))}_handleMouseMove(t){var e,i,a,r=this.findOne("."+this._movingAnchorName),n=r.getStage();n.setPointersPositions(t);const h=n.getPointerPosition();let o={x:h.x-this._anchorDragOffset.x,y:h.y-this._anchorDragOffset.y};const d=r.getAbsolutePosition();this.anchorDragBoundFunc()&&(o=this.anchorDragBoundFunc()(d,o,t)),r.setAbsolutePosition(o);const g=r.getAbsolutePosition();if(d.x!==g.x||d.y!==g.y)if("rotater"!==this._movingAnchorName){var l=this.keepRatio()||t.shiftKey,c=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(l){var f=c?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};a=Math.sqrt(Math.pow(f.x-r.x(),2)+Math.pow(f.y-r.y(),2));var u=this.findOne(".top-left").x()>f.x?-1:1,p=this.findOne(".top-left").y()>f.y?-1:1;e=a*this.cos*u,i=a*this.sin*p,this.findOne(".top-left").x(f.x-e),this.findOne(".top-left").y(f.y-i)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(r.y());else if("top-right"===this._movingAnchorName){l&&(f=c?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},a=Math.sqrt(Math.pow(r.x()-f.x,2)+Math.pow(f.y-r.y(),2)),u=this.findOne(".top-right").x()<f.x?-1:1,p=this.findOne(".top-right").y()>f.y?-1:1,e=a*this.cos*u,i=a*this.sin*p,this.findOne(".top-right").x(f.x+e),this.findOne(".top-right").y(f.y-i));var x=r.position();this.findOne(".top-left").y(x.y),this.findOne(".bottom-right").x(x.x)}else"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(r.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(r.x()):"bottom-left"===this._movingAnchorName?(l&&(f=c?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},a=Math.sqrt(Math.pow(f.x-r.x(),2)+Math.pow(r.y()-f.y,2)),u=f.x<r.x()?-1:1,p=r.y()<f.y?-1:1,e=a*this.cos*u,i=a*this.sin*p,r.x(f.x-e),r.y(f.y+i)),x=r.position(),this.findOne(".top-left").x(x.x),this.findOne(".bottom-right").y(x.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(r.y()):"bottom-right"===this._movingAnchorName?l&&(f=c?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},a=Math.sqrt(Math.pow(r.x()-f.x,2)+Math.pow(r.y()-f.y,2)),u=this.findOne(".bottom-right").x()<f.x?-1:1,p=this.findOne(".bottom-right").y()<f.y?-1:1,e=a*this.cos*u,i=a*this.sin*p,this.findOne(".bottom-right").x(f.x+e),this.findOne(".bottom-right").y(f.y+i)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(c=this.centeredScaling()||t.altKey){var v=this.findOne(".top-left"),m=this.findOne(".bottom-right"),S=v.x(),y=v.y(),_=this.getWidth()-m.x(),b=this.getHeight()-m.y();m.move({x:-S,y:-y}),v.move({x:_,y:b})}var M=this.findOne(".top-left").getAbsolutePosition();e=M.x,i=M.y;var F=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),w=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:F,height:w,rotation:s.So.getAngle(this.rotation())},t)}else{var A=this._getNodeRect();e=r.x()-A.width/2,i=-r.y()+A.height/2;let a=Math.atan2(-i,e)+Math.PI/2;A.height<0&&(a-=Math.PI);const n=s.So.getAngle(this.rotation())+a,h=s.So.getAngle(this.rotationSnapTolerance()),o=function(t,e){const i=function(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}(t);return rt(t,e,i)}(A,function(t,e,i){let a=e;for(let r=0;r<t.length;r++){const n=s.So.getAngle(t[r]),h=Math.abs(n-e)%(2*Math.PI);Math.min(h,2*Math.PI-h)<i&&(a=n)}return a}(this.rotationSnaps(),n,h)-A.rotation);this._fitNodesInto(o,t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach((e=>{e._fire("transformend",{evt:t,target:e})})),this._movingAnchorName=null}}_fitNodesInto(t,e){var i=this._getNodeRect();if(x.Z._inRange(t.width,2*-this.padding()-1,1))return void this.update();if(x.Z._inRange(t.height,2*-this.padding()-1,1))return void this.update();const a=this.flipEnabled();var r=new x.w;if(r.rotate(s.So.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const e=r.point({x:2*-this.padding(),y:0});if(t.x+=e.x,t.y+=e.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,!a)return void this.update()}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const e=r.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.width+=2*this.padding(),!a)return void this.update()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const e=r.point({x:0,y:2*-this.padding()});if(t.x+=e.x,t.y+=e.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding(),!a)return void this.update()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const e=r.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding(),!a)return void this.update()}if(this.boundBoxFunc()){const e=this.boundBoxFunc()(i,t);e?t=e:x.Z.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const n=1e7,h=new x.w;h.translate(i.x,i.y),h.rotate(i.rotation),h.scale(i.width/n,i.height/n);const o=new x.w;o.translate(t.x,t.y),o.rotate(t.rotation),o.scale(t.width/n,t.height/n);const d=o.multiply(h.invert());this._nodes.forEach((t=>{var i;const a=t.getParent().getAbsoluteTransform(),r=t.getTransform().copy();r.translate(t.offsetX(),t.offsetY());const n=new x.w;n.multiply(a.copy().invert()).multiply(d).multiply(a).multiply(r);const s=n.decompose();t.setAttrs(s),this._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t}),null===(i=t.getLayer())||void 0===i||i.batchDraw()})),this.rotation(x.Z._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t,e=this._getNodeRect();this.rotation(x.Z._getRotation(e.rotation));var i=e.width,a=e.height,r=this.enabledAnchors(),n=this.resizeEnabled(),s=this.padding(),h=this.anchorSize();this.find("._anchor").forEach((t=>{t.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:h/2+s,offsetY:h/2+s,visible:n&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:h/2+s,visible:n&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:h/2-s,offsetY:h/2+s,visible:n&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:a/2,offsetX:h/2+s,visible:n&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:a/2,offsetX:h/2-s,visible:n&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:a,offsetX:h/2+s,offsetY:h/2-s,visible:n&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:a,offsetY:h/2-s,visible:n&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:a,offsetX:h/2-s,offsetY:h/2-s,visible:n&&r.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*x.Z._sign(a)-s,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:a,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(t=this.getLayer())||void 0===t||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),m.Z.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return j.N.prototype.toObject.call(this)}}nt.prototype.className="Transformer",(0,s.DA)(nt),r.F.addGetterSetter(nt,"enabledAnchors",at,(function(t){return t instanceof Array||x.Z.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===at.indexOf(t)&&x.Z.warn("Unknown anchor name: "+t+". Available names are: "+at.join(", "))})),t||[]})),r.F.addGetterSetter(nt,"flipEnabled",!0,(0,h.I0)()),r.F.addGetterSetter(nt,"resizeEnabled",!0),r.F.addGetterSetter(nt,"anchorSize",10,(0,h.Kg)()),r.F.addGetterSetter(nt,"rotateEnabled",!0),r.F.addGetterSetter(nt,"rotationSnaps",[]),r.F.addGetterSetter(nt,"rotateAnchorOffset",50,(0,h.Kg)()),r.F.addGetterSetter(nt,"rotationSnapTolerance",5,(0,h.Kg)()),r.F.addGetterSetter(nt,"borderEnabled",!0),r.F.addGetterSetter(nt,"anchorStroke","rgb(0, 161, 255)"),r.F.addGetterSetter(nt,"anchorStrokeWidth",1,(0,h.Kg)()),r.F.addGetterSetter(nt,"anchorFill","white"),r.F.addGetterSetter(nt,"anchorCornerRadius",0,(0,h.Kg)()),r.F.addGetterSetter(nt,"borderStroke","rgb(0, 161, 255)"),r.F.addGetterSetter(nt,"borderStrokeWidth",1,(0,h.Kg)()),r.F.addGetterSetter(nt,"borderDash"),r.F.addGetterSetter(nt,"keepRatio",!0),r.F.addGetterSetter(nt,"centeredScaling",!1),r.F.addGetterSetter(nt,"ignoreStroke",!1),r.F.addGetterSetter(nt,"padding",0,(0,h.Kg)()),r.F.addGetterSetter(nt,"node"),r.F.addGetterSetter(nt,"nodes"),r.F.addGetterSetter(nt,"boundBoxFunc"),r.F.addGetterSetter(nt,"anchorDragBoundFunc"),r.F.addGetterSetter(nt,"shouldOverdrawWholeArea",!1),r.F.addGetterSetter(nt,"useSingleNodeRotation",!0),r.F.backCompat(nt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class st extends n.b{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,s.So.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}function ht(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}st.prototype.className="Wedge",st.prototype._centroid=!0,st.prototype._attrsAffectingSize=["radius"],(0,s.DA)(st),r.F.addGetterSetter(st,"radius",0,(0,h.Kg)()),r.F.addGetterSetter(st,"angle",0,(0,h.Kg)()),r.F.addGetterSetter(st,"clockwise",!1),r.F.backCompat(st,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var ot=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],dt=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function gt(t,e,i,a,r){var n=i-e,s=r-a;return 0===n?a+s/2:0===s?a:s*((t-e)/n)+a}function lt(t,e,i){var a=4*(i*t.width+e),r=[];return r.push(t.data[a++],t.data[a++],t.data[a++],t.data[a++]),r}function ct(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}r.F.addGetterSetter(j.N,"blurRadius",0,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"brightness",0,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"contrast",0,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"embossStrength",.5,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"embossWhiteLevel",.5,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"embossDirection","top-left",null,r.F.afterSetFilter),r.F.addGetterSetter(j.N,"embossBlend",!1,null,r.F.afterSetFilter),r.F.addGetterSetter(j.N,"enhance",0,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"hue",0,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"saturation",0,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"luminance",0,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"hue",0,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"saturation",0,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"value",0,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"kaleidoscopePower",2,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"kaleidoscopeAngle",0,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"threshold",0,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"noise",.2,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"pixelSize",8,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"levels",.5,(0,h.Kg)(),r.F.afterSetFilter),r.F.addGetterSetter(j.N,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),r.F.addGetterSetter(j.N,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),r.F.addGetterSetter(j.N,"blue",0,h.xj,r.F.afterSetFilter),r.F.addGetterSetter(j.N,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),r.F.addGetterSetter(j.N,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),r.F.addGetterSetter(j.N,"blue",0,h.xj,r.F.afterSetFilter),r.F.addGetterSetter(j.N,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t})),r.F.addGetterSetter(j.N,"threshold",.5,(0,h.Kg)(),r.F.afterSetFilter);const ft=a.S.Util._assign(a.S,{Arc:o,Arrow:f,Circle:u,Ellipse:p,Image:v,Label:w,Tag:A,Line:l,Path:c,Rect:T,RegularPolygon:k,Ring:C,Sprite:N,Star:O,Text:q,TextPath:Q,Transformer:nt,Wedge:st,Filters:{Blur:function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var i,a,r,n,s,h,o,d,g,l,c,f,u,p,x,v,m,S,y,_,b,M,F,w,A=t.data,T=t.width,k=t.height,P=e+e+1,C=T-1,G=k-1,N=e+1,O=N*(N+1)/2,R=new ht,L=null,I=R,D=null,z=null,E=ot[e],W=dt[e];for(r=1;r<P;r++)I=I.next=new ht,r===N&&(L=I);for(I.next=R,o=h=0,a=0;a<k;a++){for(v=m=S=y=d=g=l=c=0,f=N*(_=A[h]),u=N*(b=A[h+1]),p=N*(M=A[h+2]),x=N*(F=A[h+3]),d+=O*_,g+=O*b,l+=O*M,c+=O*F,I=R,r=0;r<N;r++)I.r=_,I.g=b,I.b=M,I.a=F,I=I.next;for(r=1;r<N;r++)n=h+((C<r?C:r)<<2),d+=(I.r=_=A[n])*(w=N-r),g+=(I.g=b=A[n+1])*w,l+=(I.b=M=A[n+2])*w,c+=(I.a=F=A[n+3])*w,v+=_,m+=b,S+=M,y+=F,I=I.next;for(D=R,z=L,i=0;i<T;i++)A[h+3]=F=c*E>>W,0!==F?(F=255/F,A[h]=(d*E>>W)*F,A[h+1]=(g*E>>W)*F,A[h+2]=(l*E>>W)*F):A[h]=A[h+1]=A[h+2]=0,d-=f,g-=u,l-=p,c-=x,f-=D.r,u-=D.g,p-=D.b,x-=D.a,n=o+((n=i+e+1)<C?n:C)<<2,d+=v+=D.r=A[n],g+=m+=D.g=A[n+1],l+=S+=D.b=A[n+2],c+=y+=D.a=A[n+3],D=D.next,f+=_=z.r,u+=b=z.g,p+=M=z.b,x+=F=z.a,v-=_,m-=b,S-=M,y-=F,z=z.next,h+=4;o+=T}for(i=0;i<T;i++){for(m=S=y=v=g=l=c=d=0,f=N*(_=A[h=i<<2]),u=N*(b=A[h+1]),p=N*(M=A[h+2]),x=N*(F=A[h+3]),d+=O*_,g+=O*b,l+=O*M,c+=O*F,I=R,r=0;r<N;r++)I.r=_,I.g=b,I.b=M,I.a=F,I=I.next;for(s=T,r=1;r<=e;r++)h=s+i<<2,d+=(I.r=_=A[h])*(w=N-r),g+=(I.g=b=A[h+1])*w,l+=(I.b=M=A[h+2])*w,c+=(I.a=F=A[h+3])*w,v+=_,m+=b,S+=M,y+=F,I=I.next,r<G&&(s+=T);for(h=i,D=R,z=L,a=0;a<k;a++)A[3+(n=h<<2)]=F=c*E>>W,F>0?(F=255/F,A[n]=(d*E>>W)*F,A[n+1]=(g*E>>W)*F,A[n+2]=(l*E>>W)*F):A[n]=A[n+1]=A[n+2]=0,d-=f,g-=u,l-=p,c-=x,f-=D.r,u-=D.g,p-=D.b,x-=D.a,n=i+((n=a+N)<G?n:G)*T<<2,d+=v+=D.r=A[n],g+=m+=D.g=A[n+1],l+=S+=D.b=A[n+2],c+=y+=D.a=A[n+3],D=D.next,f+=_=z.r,u+=b=z.g,p+=M=z.b,x+=F=z.a,v-=_,m-=b,S-=M,y-=F,z=z.next,h+=T}}(t,e)},Brighten:function(t){var e,i=255*this.brightness(),a=t.data,r=a.length;for(e=0;e<r;e+=4)a[e]+=i,a[e+1]+=i,a[e+2]+=i},Contrast:function(t){var e,i=Math.pow((this.contrast()+100)/100,2),a=t.data,r=a.length,n=150,s=150,h=150;for(e=0;e<r;e+=4)n=a[e],s=a[e+1],h=a[e+2],n/=255,n-=.5,n*=i,n+=.5,s/=255,s-=.5,s*=i,s+=.5,h/=255,h-=.5,h*=i,h+=.5,n=(n*=255)<0?0:n>255?255:n,s=(s*=255)<0?0:s>255?255:s,h=(h*=255)<0?0:h>255?255:h,a[e]=n,a[e+1]=s,a[e+2]=h},Emboss:function(t){var e=10*this.embossStrength(),i=255*this.embossWhiteLevel(),a=this.embossDirection(),r=this.embossBlend(),n=0,s=0,h=t.data,o=t.width,d=t.height,g=4*o,l=d;switch(a){case"top-left":n=-1,s=-1;break;case"top":n=-1,s=0;break;case"top-right":n=-1,s=1;break;case"right":n=0,s=1;break;case"bottom-right":n=1,s=1;break;case"bottom":n=1,s=0;break;case"bottom-left":n=1,s=-1;break;case"left":n=0,s=-1;break;default:x.Z.error("Unknown emboss direction: "+a)}do{var c=(l-1)*g,f=n;l+f<1&&(f=0),l+f>d&&(f=0);var u=(l-1+f)*o*4,p=o;do{var v=c+4*(p-1),m=s;p+m<1&&(m=0),p+m>o&&(m=0);var S=u+4*(p-1+m),y=h[v]-h[S],_=h[v+1]-h[S+1],b=h[v+2]-h[S+2],M=y,F=M>0?M:-M;if((_>0?_:-_)>F&&(M=_),(b>0?b:-b)>F&&(M=b),M*=e,r){var w=h[v]+M,A=h[v+1]+M,T=h[v+2]+M;h[v]=w>255?255:w<0?0:w,h[v+1]=A>255?255:A<0?0:A,h[v+2]=T>255?255:T<0?0:T}else{var k=i-M;k<0?k=0:k>255&&(k=255),h[v]=h[v+1]=h[v+2]=k}}while(--p)}while(--l)},Enhance:function(t){var e,i,a,r,n=t.data,s=n.length,h=n[0],o=h,d=n[1],g=d,l=n[2],c=l,f=this.enhance();if(0!==f){for(r=0;r<s;r+=4)(e=n[r+0])<h?h=e:e>o&&(o=e),(i=n[r+1])<d?d=i:i>g&&(g=i),(a=n[r+2])<l?l=a:a>c&&(c=a);var u,p,x,v,m,S,y,_,b;for(o===h&&(o=255,h=0),g===d&&(g=255,d=0),c===l&&(c=255,l=0),f>0?(p=o+f*(255-o),x=h-f*(h-0),m=g+f*(255-g),S=d-f*(d-0),_=c+f*(255-c),b=l-f*(l-0)):(p=o+f*(o-(u=.5*(o+h))),x=h+f*(h-u),m=g+f*(g-(v=.5*(g+d))),S=d+f*(d-v),_=c+f*(c-(y=.5*(c+l))),b=l+f*(l-y)),r=0;r<s;r+=4)n[r+0]=gt(n[r+0],h,o,x,p),n[r+1]=gt(n[r+1],d,g,S,m),n[r+2]=gt(n[r+2],l,c,b,_)}},Grayscale:function(t){var e,i,a=t.data,r=a.length;for(e=0;e<r;e+=4)i=.34*a[e]+.5*a[e+1]+.16*a[e+2],a[e]=i,a[e+1]=i,a[e+2]=i},HSL:function(t){var e,i,a,r,n,s=t.data,h=s.length,o=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,g=127*this.luminance(),l=1*o*Math.cos(d*Math.PI/180),c=1*o*Math.sin(d*Math.PI/180),f=.299+.701*l+.167*c,u=.587-.587*l+.33*c,p=.114-.114*l-.497*c,x=.299-.299*l-.328*c,v=.587+.413*l+.035*c,m=.114-.114*l+.293*c,S=.299-.3*l+1.25*c,y=.587-.586*l-1.05*c,_=.114+.886*l-.2*c;for(e=0;e<h;e+=4)i=s[e+0],a=s[e+1],r=s[e+2],n=s[e+3],s[e+0]=f*i+u*a+p*r+g,s[e+1]=x*i+v*a+m*r+g,s[e+2]=S*i+y*a+_*r+g,s[e+3]=n},HSV:function(t){var e,i,a,r,n,s=t.data,h=s.length,o=Math.pow(2,this.value()),d=Math.pow(2,this.saturation()),g=Math.abs(this.hue()+360)%360,l=o*d*Math.cos(g*Math.PI/180),c=o*d*Math.sin(g*Math.PI/180),f=.299*o+.701*l+.167*c,u=.587*o-.587*l+.33*c,p=.114*o-.114*l-.497*c,x=.299*o-.299*l-.328*c,v=.587*o+.413*l+.035*c,m=.114*o-.114*l+.293*c,S=.299*o-.3*l+1.25*c,y=.587*o-.586*l-1.05*c,_=.114*o+.886*l-.2*c;for(e=0;e<h;e+=4)i=s[e+0],a=s[e+1],r=s[e+2],n=s[e+3],s[e+0]=f*i+u*a+p*r,s[e+1]=x*i+v*a+m*r,s[e+2]=S*i+y*a+_*r,s[e+3]=n},Invert:function(t){var e,i=t.data,a=i.length;for(e=0;e<a;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]},Kaleidoscope:function(t){var e,i,a,r,n,s,h,o,d,g=t.width,l=t.height,c=Math.round(this.kaleidoscopePower()),f=Math.round(this.kaleidoscopeAngle()),u=Math.floor(g*(f%360)/360);if(!(c<1)){var p=x.Z.createCanvasElement();p.width=g,p.height=l;var v=p.getContext("2d").getImageData(0,0,g,l);!function(t,e,i){var a,r,n,s,h=t.data,o=e.data,d=t.width,g=t.height,l=i.polarCenterX||d/2,c=i.polarCenterY||g/2,f=0,u=0,p=0,x=0,v=Math.sqrt(l*l+c*c);r=d-l,n=g-c,v=(s=Math.sqrt(r*r+n*n))>v?s:v;var m,S,y,_,b=g,M=d,F=360/M*Math.PI/180;for(S=0;S<M;S+=1)for(y=Math.sin(S*F),_=Math.cos(S*F),m=0;m<b;m+=1)r=Math.floor(l+v*m/b*_),f=h[0+(a=4*((n=Math.floor(c+v*m/b*y))*d+r))],u=h[a+1],p=h[a+2],x=h[a+3],o[0+(a=4*(S+m*d))]=f,o[a+1]=u,o[a+2]=p,o[a+3]=x}(t,v,{polarCenterX:g/2,polarCenterY:l/2});for(var m=g/Math.pow(2,c);m<=8;)m*=2,c-=1;var S=m=Math.ceil(m),y=0,_=S,b=1;for(u+m>g&&(y=S,_=0,b=-1),i=0;i<l;i+=1)for(e=y;e!==_;e+=b)o=4*(g*i+Math.round(e+u)%g),r=v.data[o+0],n=v.data[o+1],s=v.data[o+2],h=v.data[o+3],d=4*(g*i+e),v.data[d+0]=r,v.data[d+1]=n,v.data[d+2]=s,v.data[d+3]=h;for(i=0;i<l;i+=1)for(S=Math.floor(m),a=0;a<c;a+=1){for(e=0;e<S+1;e+=1)o=4*(g*i+e),r=v.data[o+0],n=v.data[o+1],s=v.data[o+2],h=v.data[o+3],d=4*(g*i+2*S-e-1),v.data[d+0]=r,v.data[d+1]=n,v.data[d+2]=s,v.data[d+3]=h;S*=2}!function(t,e,i){var a,r,n,s,h,o,d=t.data,g=e.data,l=t.width,c=t.height,f=i.polarCenterX||l/2,u=i.polarCenterY||c/2,p=0,x=0,v=0,m=0,S=Math.sqrt(f*f+u*u);r=l-f,n=c-u,S=(o=Math.sqrt(r*r+n*n))>S?o:S;var y,_,b,M=c,F=l,w=i.polarRotation||0;for(r=0;r<l;r+=1)for(n=0;n<c;n+=1)s=r-f,h=n-u,y=Math.sqrt(s*s+h*h)*M/S,_=(_=(180*Math.atan2(h,s)/Math.PI+360+w)%360)*F/360,b=Math.floor(_),p=d[0+(a=4*(Math.floor(y)*l+b))],x=d[a+1],v=d[a+2],m=d[a+3],g[0+(a=4*(n*l+r))]=p,g[a+1]=x,g[a+2]=v,g[a+3]=m}(v,t,{polarRotation:0})}},Mask:function(t){var e=function(t,e){var i=lt(t,0,0),a=lt(t,t.width-1,0),r=lt(t,0,t.height-1),n=lt(t,t.width-1,t.height-1),s=e||10;if(ct(i,a)<s&&ct(a,n)<s&&ct(n,r)<s&&ct(r,i)<s){for(var h=function(t){for(var e=[0,0,0],i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([a,i,n,r]),o=[],d=0;d<t.width*t.height;d++){var g=ct(h,[t.data[4*d],t.data[4*d+1],t.data[4*d+2]]);o[d]=g<s?0:255}return o}}(t,this.threshold());return e&&function(t,e){for(var i=0;i<t.width*t.height;i++)t.data[4*i+3]=e[i]}(t,e=function(t,e,i){for(var a=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],r=Math.round(Math.sqrt(a.length)),n=Math.floor(r/2),s=[],h=0;h<i;h++)for(var o=0;o<e;o++){for(var d=h*e+o,g=0,l=0;l<r;l++)for(var c=0;c<r;c++){var f=h+l-n,u=o+c-n;if(f>=0&&f<i&&u>=0&&u<e){var p=a[l*r+c];g+=t[f*e+u]*p}}s[d]=g}return s}(e=function(t,e,i){for(var a=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(a.length)),n=Math.floor(r/2),s=[],h=0;h<i;h++)for(var o=0;o<e;o++){for(var d=h*e+o,g=0,l=0;l<r;l++)for(var c=0;c<r;c++){var f=h+l-n,u=o+c-n;if(f>=0&&f<i&&u>=0&&u<e){var p=a[l*r+c];g+=t[f*e+u]*p}}s[d]=g>=1020?255:0}return s}(e=function(t,e,i){for(var a=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(a.length)),n=Math.floor(r/2),s=[],h=0;h<i;h++)for(var o=0;o<e;o++){for(var d=h*e+o,g=0,l=0;l<r;l++)for(var c=0;c<r;c++){var f=h+l-n,u=o+c-n;if(f>=0&&f<i&&u>=0&&u<e){var p=a[l*r+c];g+=t[f*e+u]*p}}s[d]=2040===g?255:0}return s}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},Noise:function(t){var e,i=255*this.noise(),a=t.data,r=a.length,n=i/2;for(e=0;e<r;e+=4)a[e+0]+=n-2*n*Math.random(),a[e+1]+=n-2*n*Math.random(),a[e+2]+=n-2*n*Math.random()},Pixelate:function(t){var e,i,a,r,n,s,h,o,d,g,l,c,f,u,p=Math.ceil(this.pixelSize()),v=t.width,m=t.height,S=Math.ceil(v/p),y=Math.ceil(m/p),_=t.data;if(p<=0)x.Z.error("pixelSize value can not be <= 0");else for(c=0;c<S;c+=1)for(f=0;f<y;f+=1){for(r=0,n=0,s=0,h=0,d=(o=c*p)+p,l=(g=f*p)+p,u=0,e=o;e<d;e+=1)if(!(e>=v))for(i=g;i<l;i+=1)i>=m||(r+=_[0+(a=4*(v*i+e))],n+=_[a+1],s+=_[a+2],h+=_[a+3],u+=1);for(r/=u,n/=u,s/=u,h/=u,e=o;e<d;e+=1)if(!(e>=v))for(i=g;i<l;i+=1)i>=m||(_[0+(a=4*(v*i+e))]=r,_[a+1]=n,_[a+2]=s,_[a+3]=h)}},Posterize:function(t){var e,i=Math.round(254*this.levels())+1,a=t.data,r=a.length,n=255/i;for(e=0;e<r;e+=1)a[e]=Math.floor(a[e]/n)*n},RGB:function(t){var e,i,a=t.data,r=a.length,n=this.red(),s=this.green(),h=this.blue();for(e=0;e<r;e+=4)i=(.34*a[e]+.5*a[e+1]+.16*a[e+2])/255,a[e]=i*n,a[e+1]=i*s,a[e+2]=i*h,a[e+3]=a[e+3]},RGBA:function(t){var e,i,a=t.data,r=a.length,n=this.red(),s=this.green(),h=this.blue(),o=this.alpha();for(e=0;e<r;e+=4)i=1-o,a[e]=n*o+a[e]*i,a[e+1]=s*o+a[e+1]*i,a[e+2]=h*o+a[e+2]*i},Sepia:function(t){var e,i,a,r,n=t.data,s=n.length;for(e=0;e<s;e+=4)i=n[e+0],a=n[e+1],r=n[e+2],n[e+0]=Math.min(255,.393*i+.769*a+.189*r),n[e+1]=Math.min(255,.349*i+.686*a+.168*r),n[e+2]=Math.min(255,.272*i+.534*a+.131*r)},Solarize:function(t){var e=t.data,i=t.width,a=4*i,r=t.height;do{var n=(r-1)*a,s=i;do{var h=n+4*(s-1),o=e[h],d=e[h+1],g=e[h+2];o>127&&(o=255-o),d>127&&(d=255-d),g>127&&(g=255-g),e[h]=o,e[h+1]=d,e[h+2]=g}while(--s)}while(--r)},Threshold:function(t){var e,i=255*this.threshold(),a=t.data,r=a.length;for(e=0;e<r;e+=1)a[e]=a[e]<i?0:255}}})}}]);
//# sourceMappingURL=969.js.map